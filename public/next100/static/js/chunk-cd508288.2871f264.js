(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd508288"],{"02d2":function(t,e,n){},"196f":function(t,e,n){"use strict";var o=n("02d2"),r=n.n(o);r.a},"2f21":function(t,e,n){"use strict";var o=n("79e5");t.exports=function(t,e){return!!t&&o(function(){e?t.call(null,function(){},1):t.call(null)})}},"55dd":function(t,e,n){"use strict";var o=n("5ca1"),r=n("d8e8"),i=n("4bf8"),a=n("79e5"),c=[].sort,l=[1,2,3];o(o.P+o.F*(a(function(){l.sort(void 0)})||!a(function(){l.sort(null)})||!n("2f21")(c)),"Array",{sort:function(t){return void 0===t?c.call(i(this)):c.call(i(this),r(t))}})},d13f:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"layer-list-wrapper"},[n("div",{staticClass:"layer-list"},t._l(t.layers,function(e,o){return n("div",{staticClass:"layer",style:t.layerStyles[o]},[n("div",{staticClass:"layer__word",style:t.keywordStyles[o]},[t._v(t._s(e.words[0]))]),t._l(e.related_contents,function(r,i){return n("img",{key:r.id,ref:"images",refInFor:!0,staticClass:"layer__img",style:t.imageStyles[o],attrs:{"data-layer-id":e.id,"data-content-id":r.id,src:r.img_url},on:{click:function(e){t.onClickImage(r)}}})})],2)}))]),t._l(t.contextMenuStatuses,function(e){return[n("div",{ref:e.refName,refInFor:!0,staticClass:"context-menu",style:e.style},[t._v("\n      ユーザー 000"+t._s(e.floorId)+" "),n("br"),t._v("\n      のメニュー\n    ")])]}),t.isShowContentDetailModal?[n("div",{staticClass:"modal is-active"},[n("div",{staticClass:"modal-background",on:{click:function(e){return e.preventDefault(),t.closeContentDetailModal(e)}}}),t.currentDetailModalContent?n("div",{staticClass:"modal-content",style:t.currentDetailModalStyle},[n("p",[t._v(t._s(t.currentDetailModalContent.title))]),n("p",{staticClass:"image is-4by3"},[n("img",{attrs:{src:t.currentDetailModalContent.img_url,alt:""}})]),n("p",[t._v(t._s(t.currentDetailModalContent.desc))])]):t._e(),n("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"}})])]:t._e()],2)},r=[],i=(n("c5f6"),n("55dd"),n("ac6a"),n("7514"),n("96cf"),n("3040")),a=(n("cadf"),n("551c"),n("097d"),n("a5bc")),c=n("2ef0"),l=n.n(c),s=n("f633"),u=n("c8b5"),d=n.n(u),f=50,h=10,p=10,g={name:"Meeting",mixins:[s["a"]],created:function(){var t={wallId:this.$route.params.wallId};startRecognizeSpeachSDK(t),this.fetchTranscripts(),this.listenPersonalTouch(),this.initializePinchEvent()},data:function(){var t=this;return{layers:[],isShowContentDetailModal:!1,currentContentDetailModalFloor:!1,currentDetailModalContent:null,currentDetailModalStyle:{},contextMenuStatuses:[],layerStyles:l.a.range(10).map(function(e){return t.getComputedStyleForLayer(e)}),keywordStyles:l.a.range(10).map(function(){return t.getRandomStyleForKeyWord()}),imageStyles:l.a.range(10).map(function(){return t.getRandomStyleForImage()})}},computed:{},methods:{listenPersonalTouch:function(){window.addEventListener("CUSTOM_TOUCH_START",this.onClickTable)},fetchTranscripts:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n,o,r,i,c,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params.wallId,n="/api/transcripts/".concat(e),t.next=4,a["a"].get(n);case 4:o=t.sent,r=o.data,i=r.searches,r.search_first_index,r.search_last_index,c=r.related_contents,r.related_content_last_index,l=i.map(function(t){return t.related_contents=c.filter(function(e){return e.transcript_id===t.transcript_id}),t}),this.layers=l;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),onClickImage:function(t){var e=t.floorId,n=t.contentId;this.openContentDetailModal({floorId:e,contentId:n})},openContentDetailModal:function(t){var e=t.floorId,n=t.contentId;if(!this.isShowContentDetailModal){var o=this.layers.find(function(t){return t.related_contents.find(function(t){return t.id===n})});if(!o)return!1;var r=o.related_contents.find(function(t){return t.id===n});this.currentDetailModalStyle=this.getModalStyleByFloorId(e),this.currentDetailModalContent=r,this.isShowContentDetailModal=!0,this.contentDetailOpenTime=(new Date).getTime()}},closeContentDetailModal:function(){var t=1e3,e=(new Date).getTime()-this.contentDetailOpenTime;if(e<=t)return!1;this.isShowContentDetailModal=!1},onClickTable:function(t){var e=this,n=t.detail[0],o=!1,r=[];if(this.$refs.images.forEach(function(t){var i=t.getBoundingClientRect();if(e.isTouchObjectByRect(n,i))return o=!0,r.push(t),!1}),o){r.sort(function(t,e){var n=Number(t.getAttribute("data-content-id")),o=Number(e.getAttribute("data-content-id"));return n<o?-1:1});var i=r[0],a=n.floorId,c=Number(i.getAttribute("data-content-id"));return this.onClickImage({floorId:a,contentId:c}),!1}var l=this.$refs["context-menu-".concat(n.floorId)];l&&l.length>0&&!this.isTouchObjectByRect(n,l[0].getBoundingClientRect())?this.closeContextMenu(n):0===this.contextMenuStatuses.filter(function(t){return t.floorId===n.floorId}).length&&this.openContextMenu(n)},openContextMenu:function(t){var e=this.getTransformDegByFloorId(t.floorId),n={left:"".concat(t.x,"px"),top:"".concat(t.y,"px"),transform:"rotate(".concat(e,"deg)")},o="context-menu-".concat(t.floorId),r={floorId:t.floorId,style:n,refName:o};this.contextMenuStatuses.push(r)},closeContextMenu:function(t){var e=t.floorId;this.contextMenuStatuses=this.contextMenuStatuses.filter(function(t){return t.floorId!==e})},getStyleByContextMenuPosition:function(){},openPinList:function(){},createPin:function(){},removePin:function(){},offRecord:function(){},leave:function(){},exitWall:function(){},removeContent:function(){},removeWord:function(){},getRandomStyleForImage:function(){var t=l.a.random(window.innerWidth),e=l.a.random(window.innerHeight),n={left:"".concat(t,"px"),top:"".concat(e,"px")};return n},getRandomStyleForKeyWord:function(){var t=800,e=600,n=l.a.random(t,window.innerWidth-t),o=l.a.random(e,window.innerHeight-e),r={left:"".concat(n,"px"),top:"".concat(o,"px")};return r},getComputedStyleForLayer:function(t){var e=f-t*h,n=1-.08*t,o=p-t,r={transform:"translate3D(0px, 0px, ".concat(e,"px)"),opacity:n,zIndex:o};return r},getModalStyleByFloorId:function(t){var e=this.getTransformDegByFloorId(t);return{transform:"rotate(".concat(e,"deg)")}},getTransformDegByFloorId:function(t){var e={1:0,2:90,3:180,4:270};return e[t]},initializePinchEvent:function(){var t=this,e=document.querySelector("#app"),n=new d.a(e);n.get("pinch").set({enable:!0}),n.on("pinchout",function(e){t.logType("pinchout"),t.logEvent(e)}),n.on("pinchin",function(e){t.logType("pinchin"),t.logEvent(e)}),n.on("pinchmove",function(e){t.logType("pinchmove"),t.logEvent(e)})},logType:function(t){console.log(t)},logEvent:function(t){this.pinchScale=t.scale,console.log(t.scale)}}},m=g,y=(n("196f"),n("2877")),v=Object(y["a"])(m,o,r,!1,null,"2dfe161e",null);v.options.__file="Meeting.vue";e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-cd508288.2871f264.js.map