{"version":3,"sources":["webpack:///./src/views/Meeting.vue?fbd2","webpack:///./node_modules/core-js/modules/_strict-method.js","webpack:///./node_modules/core-js/modules/es6.array.sort.js","webpack:///./src/views/Meeting.vue?10bd","webpack:///src/views/Meeting.vue","webpack:///./src/views/Meeting.vue?8f24","webpack:///./src/views/Meeting.vue?efce"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Meeting_vue_vue_type_style_index_0_id_2dfe161e_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Meeting_vue_vue_type_style_index_0_id_2dfe161e_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","fails","module","exports","method","arg","call","$export","aFunction","toObject","$sort","sort","test","P","F","undefined","comparefn","this","render","_vm","_h","$createElement","_c","_self","staticClass","_l","layer","i","style","layerStyles","keywordStyles","_v","_s","words","content","j","key","id","ref","refInFor","imageStyles","attrs","data-layer-id","data-content-id","src","img_url","on","click","$event","onClickImage","stat","refName","floorId","preventDefault","closeContentDetailModal","currentDetailModalContent","title","alt","desc","_e","aria-label","staticRenderFns","START_Z_AXIS","Z_STEP","SHOW_LAYER_NUM","Meetingvue_type_script_lang_js_","name","mixins","customTouchEventDriver","created","opts","wallId","$route","params","startRecognizeSpeachSDK","fetchTranscripts","listenPersonalTouch","initializePinchEvent","data","_this","layers","isShowContentDetailModal","currentContentDetailModalFloor","currentDetailModalStyle","contextMenuStatuses","lodash_default","a","range","map","getComputedStyleForLayer","getRandomStyleForKeyWord","getRandomStyleForImage","computed","methods","window","addEventListener","onClickTable","_fetchTranscripts","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","url","res","_res$data","searches","related_contents","wrap","_context","prev","next","concat","ApiClient","get","sent","search_first_index","search_last_index","related_content_last_index","s","filter","r","transcript_id","stop","apply","arguments","_ref","contentId","openContentDetailModal","_ref2","find","l","c","getModalStyleByFloorId","contentDetailOpenTime","Date","getTime","waitTime","time","evt","_this2","touch","detail","isTouchImage","touchedImages","$refs","images","forEach","img","rect","getBoundingClientRect","isTouchObjectByRect","push","b","aId","Number","getAttribute","bId","latestTouchedImage","existRef","length","closeContextMenu","d","openContextMenu","getTransformDegByFloorId","left","x","top","y","transform","status","getStyleByContextMenuPosition","openPinList","createPin","removePin","offRecord","leave","exitWall","removeContent","removeWord","random","innerWidth","innerHeight","x0","y0","index","z","alpha","zIndex","opacity","1","2","3","4","_this3","square","document","querySelector","hammer","hammer_default","set","enable","e","logType","logEvent","type","console","log","pinchScale","scale","views_Meetingvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"2IAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAmiBE,EAAG,uCCCtiB,IAAAE,EAAYH,EAAQ,QAEpBI,EAAAC,QAAA,SAAAC,EAAAC,GACA,QAAAD,GAAAH,EAAA,WAEAI,EAAAD,EAAAE,KAAA,kBAAuD,GAAAF,EAAAE,KAAA,8CCLvD,IAAAC,EAAcT,EAAQ,QACtBU,EAAgBV,EAAQ,QACxBW,EAAeX,EAAQ,QACvBG,EAAYH,EAAQ,QACpBY,KAAAC,KACAC,GAAA,OAEAL,IAAAM,EAAAN,EAAAO,GAAAb,EAAA,WAEAW,EAAAD,UAAAI,OACCd,EAAA,WAEDW,EAAAD,KAAA,UAEOb,EAAQ,OAARA,CAA0BY,IAAA,SAEjCC,KAAA,SAAAK,GACA,YAAAD,IAAAC,EACAN,EAAAJ,KAAAG,EAAAQ,OACAP,EAAAJ,KAAAG,EAAAQ,MAAAT,EAAAQ,iDCpBA,IAAAE,EAAA,WAA0B,IAAAC,EAAAF,KAAaG,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,YAAsBF,EAAA,OAAYE,YAAA,uBAAiCF,EAAA,OAAYE,YAAA,cAAyBL,EAAAM,GAAAN,EAAA,gBAAAO,EAAAC,GAAuC,OAAAL,EAAA,OAAiBE,YAAA,QAAAI,MAAAT,EAAAU,YAAAF,KAA+CL,EAAA,OAAYE,YAAA,cAAAI,MAAAT,EAAAW,cAAAH,KAAuDR,EAAAY,GAAAZ,EAAAa,GAAAN,EAAAO,MAAA,OAAAd,EAAAM,GAAAC,EAAA,0BAAAQ,EAAAC,GAAuF,OAAAb,EAAA,OAAiBc,IAAAF,EAAAG,GAAAC,IAAA,SAAAC,UAAA,EAAAf,YAAA,aAAAI,MAAAT,EAAAqB,YAAAb,GAAAc,OAAqGC,gBAAAhB,EAAAW,GAAAM,kBAAAT,EAAAG,GAAAO,IAAAV,EAAAW,SAA4EC,IAAKC,MAAA,SAAAC,GAAyB7B,EAAA8B,aAAAf,UAA8B,QAAMf,EAAAM,GAAAN,EAAA,6BAAA+B,GAAqD,OAAA5B,EAAA,OAAkBgB,IAAAY,EAAAC,QAAAZ,UAAA,EAAAf,YAAA,eAAAI,MAAAsB,EAAA,QAA6E/B,EAAAY,GAAA,mBAAAZ,EAAAa,GAAAkB,EAAAE,SAAA,KAAA9B,EAAA,MAAAH,EAAAY,GAAA,4BAAgGZ,EAAA,0BAAAG,EAAA,OAA4CE,YAAA,oBAA8BF,EAAA,OAAYE,YAAA,mBAAAsB,IAAmCC,MAAA,SAAAC,GAAiD,OAAxBA,EAAAK,iBAAwBlC,EAAAmC,wBAAAN,OAA6C7B,EAAA,0BAAAG,EAAA,OAA4CE,YAAA,gBAAAI,MAAAT,EAAA,0BAAgEG,EAAA,KAAAH,EAAAY,GAAAZ,EAAAa,GAAAb,EAAAoC,0BAAAC,UAAAlC,EAAA,KAAwEE,YAAA,kBAA4BF,EAAA,OAAYmB,OAAOG,IAAAzB,EAAAoC,0BAAAV,QAAAY,IAAA,QAAsDnC,EAAA,KAAAH,EAAAY,GAAAZ,EAAAa,GAAAb,EAAAoC,0BAAAG,WAAAvC,EAAAwC,KAAArC,EAAA,UAAyFE,YAAA,uBAAAiB,OAA0CmB,aAAA,cAAsBzC,EAAAwC,MAAA,IACplDE,uKC+CAC,EAAA,GACAC,EAAA,GACAC,EAAA,GAEAC,GACAC,KAAA,UACAC,QAAAC,EAAA,MACAC,QAHA,WAIA,IAAAC,GACAC,OAAAtD,KAAAuD,OAAAC,OAAAF,QAEAG,wBAAAJ,GAEArD,KAAA0D,mBACA1D,KAAA2D,sBAEA3D,KAAA4D,wBAEAC,KAdA,WAcA,IAAAC,EAAA9D,KACA,OACA+D,UACAC,0BAAA,EACAC,gCAAA,EACA3B,0BAAA,KACA4B,2BACAC,uBACAvD,YAAAwD,EAAAC,EAAAC,MAAA,IAAAC,IAAA,SAAA7D,GACA,OAAAoD,EAAAU,yBAAA9D,KAEAG,cAAAuD,EAAAC,EAAAC,MAAA,IAAAC,IAAA,WACA,OAAAT,EAAAW,6BAEAlD,YAAA6C,EAAAC,EAAAC,MAAA,IAAAC,IAAA,WACA,OAAAT,EAAAY,6BAIAC,YAEAC,SACAjB,oBADA,WAEAkB,OAAAC,iBAAA,qBAAA9E,KAAA+E,eAEArB,iBAJA,eAAAsB,EAAAC,OAAAC,EAAA,KAAAD,CAAAE,mBAAAC,KAAA,SAAAC,IAAA,IAAA/B,EAAAgC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA3B,EAAA,OAAAoB,mBAAAQ,KAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAKAxC,EAAAtD,KAAAuD,OAAAC,OAAAF,OACAgC,EANA,oBAAAS,OAMAzC,GANAsC,EAAAE,KAAA,EAOAE,EAAA,KAAAC,IAAAX,GAPA,OAOAC,EAPAK,EAAAM,KAAAV,EAgBAD,EAAA1B,KALA4B,EAXAD,EAWAC,SAXAD,EAYAW,mBAZAX,EAaAY,kBACAV,EAdAF,EAcAE,iBAdAF,EAeAa,2BAGAtC,EAAA0B,EAAAlB,IAAA,SAAA+B,GAEA,OADAA,EAAAZ,mBAAAa,OAAA,SAAAC,GAAA,OAAAA,EAAAC,gBAAAH,EAAAG,gBACAH,IAGAtG,KAAA+D,SAvBA,wBAAA6B,EAAAc,SAAArB,EAAArF,SAAA,yBAAAgF,EAAA2B,MAAA3G,KAAA4G,YAAA,GAyBA5E,aAzBA,SAAA6E,GAyBA,IAAA1E,EAAA0E,EAAA1E,QAAA2E,EAAAD,EAAAC,UACA9G,KAAA+G,wBAAA5E,UAAA2E,eAEAC,uBA5BA,SAAAC,GA4BA,IAAA7E,EAAA6E,EAAA7E,QAAA2E,EAAAE,EAAAF,UACA,IAAA9G,KAAAgE,yBAAA,CAKA,IAAAvD,EAAAT,KAAA+D,OAAAkD,KAAA,SAAAC,GACA,OAAAA,EAAAxB,iBAAAuB,KAAA,SAAAE,GAAA,OAAAA,EAAA/F,KAAA0F,MAGA,IAAArG,EACA,SAGA,IAAAQ,EAAAR,EAAAiF,iBAAAuB,KAAA,SAAAE,GAAA,OAAAA,EAAA/F,KAAA0F,IACA9G,KAAAkE,wBAAAlE,KAAAoH,uBAAAjF,GACAnC,KAAAsC,0BAAArB,EACAjB,KAAAgE,0BAAA,EACAhE,KAAAqH,uBAAA,IAAAC,MAAAC,YAEAlF,wBAhDA,WAiDA,IAAAmF,EAAA,IACAC,GAAA,IAAAH,MAAAC,UAAAvH,KAAAqH,sBACA,GAAAI,GAAAD,EACA,SAEAxH,KAAAgE,0BAAA,GAEAe,aAxDA,SAwDA2C,GAAA,IAAAC,EAAA3H,KAGA4H,EAAAF,EAAAG,OAAA,GAGAC,GAAA,EAGAC,KAUA,GATA/H,KAAAgI,MAAAC,OAAAC,QAAA,SAAAC,GACA,IAAAC,EAAAD,EAAAE,wBACA,GAAAV,EAAAW,oBAAAV,EAAAQ,GAGA,OAFAN,GAAA,EACAC,EAAAQ,KAAAJ,IACA,IAIAL,EAAA,CAEAC,EAAArI,KAAA,SAAA2E,EAAAmE,GACA,IAAAC,EAAAC,OAAArE,EAAAsE,aAAA,oBACAC,EAAAF,OAAAF,EAAAG,aAAA,oBACA,OAAAF,EAAAG,GAAA,MAGA,IAAAC,EAAAd,EAAA,GAEA5F,EAAAyF,EAAAzF,QACA2E,EAAA4B,OAAAG,EAAAF,aAAA,oBAEA,OADA3I,KAAAgC,cAAAG,UAAA2E,eACA,EAIA,IAAAgC,EAAA9I,KAAAgI,MAAA,gBAAAjC,OAAA6B,EAAAzF,UAEA2G,GACAA,EAAAC,OAAA,IACA/I,KAAAsI,oBAAAV,EAAAkB,EAAA,GAAAT,yBAEArI,KAAAgJ,iBAAApB,GAKA,IAHA5H,KAAAmE,oBACAoC,OACA,SAAA0C,GAAA,OAAAA,EAAA9G,UAAAyF,EAAAzF,UACA4G,QAEA/I,KAAAkJ,gBAAAtB,IAGAsB,gBA5GA,SA4GAtB,GACA,IAAAqB,EAAAjJ,KAAAmJ,yBAAAvB,EAAAzF,SACAxB,GACAyI,KAAA,GAAArD,OAAA6B,EAAAyB,EAAA,MACAC,IAAA,GAAAvD,OAAA6B,EAAA2B,EAAA,MACAC,UAAA,UAAAzD,OAAAkD,EAAA,SAEA/G,EAAA,gBAAA6D,OAAA6B,EAAAzF,SACAsH,GACAtH,QAAAyF,EAAAzF,QACAxB,QACAuB,WAEAlC,KAAAmE,oBAAAoE,KAAAkB,IAEAT,iBA3HA,SA2HApB,GACA,IAAAzF,EAAAyF,EAAAzF,QACAnC,KAAAmE,oBAAAnE,KAAAmE,oBAAAoC,OAAA,SAAAD,GAAA,OAAAA,EAAAnE,eAEAuH,8BA/HA,aAkIAC,YAlIA,aAqIAC,UArIA,aAwIAC,UAxIA,aA2IAC,UA3IA,aA8IAC,MA9IA,aAiJAC,SAjJA,aAoJAC,cApJA,aAuJAC,WAvJA,aA0JAxF,uBA1JA,WA2JA,IAAA2E,EAAAjF,EAAAC,EAAA8F,OAAAtF,OAAAuF,YACAb,EAAAnF,EAAAC,EAAA8F,OAAAtF,OAAAwF,aACA1J,GACAyI,KAAA,GAAArD,OAAAsD,EAAA,MACAC,IAAA,GAAAvD,OAAAwD,EAAA,OAEA,OAAA5I,GAEA8D,yBAnKA,WAoKA,IAAA6F,EAAA,IACAC,EAAA,IACAlB,EAAAjF,EAAAC,EAAA8F,OAAAG,EAAAzF,OAAAuF,WAAAE,GACAf,EAAAnF,EAAAC,EAAA8F,OAAAI,EAAA1F,OAAAwF,YAAAE,GACA5J,GACAyI,KAAA,GAAArD,OAAAsD,EAAA,MACAC,IAAA,GAAAvD,OAAAwD,EAAA,OAEA,OAAA5I,GAEA6D,yBA9KA,SA8KAgG,GACA,IAAAC,EAAA5H,EAAA2H,EAAA1H,EACA4H,EAAA,MAAAF,EACAG,EAAA5H,EAAAyH,EACA7J,GACA6I,UAAA,yBAAAzD,OAAA0E,EAAA,OACAG,QAAAF,EACAC,UAEA,OAAAhK,GAEAyG,uBAzLA,SAyLAjF,GACA,IAAA8G,EAAAjJ,KAAAmJ,yBAAAhH,GACA,OAAAqH,UAAA,UAAAzD,OAAAkD,EAAA,UAEAE,yBA7LA,SA6LAhH,GACA,IAAAoC,GACAsG,EAAA,EACAC,EAAA,GACAC,EAAA,IACAC,EAAA,KAGA,OAAAzG,EAAApC,IAEAyB,qBAvMA,WAuMA,IAAAqH,EAAAjL,KACAkL,EAAAC,SAAAC,cAAA,QACAC,EAAA,IAAAC,EAAAjH,EAAA6G,GACAG,EAAApF,IAAA,SAAAsF,KAAAC,QAAA,IACAH,EAAAxJ,GAAA,oBAAA4J,GACAR,EAAAS,QAAA,YACAT,EAAAU,SAAAF,KAEAJ,EAAAxJ,GAAA,mBAAA4J,GACAR,EAAAS,QAAA,WACAT,EAAAU,SAAAF,KAEAJ,EAAAxJ,GAAA,qBAAA4J,GACAR,EAAAS,QAAA,aACAT,EAAAU,SAAAF,MAGAC,QAxNA,SAwNAE,GACAC,QAAAC,IAAAF,IAEAD,SA3NA,SA2NAF,GACAzL,KAAA+L,WAAAN,EAAAO,MACAH,QAAAC,IAAAL,EAAAO,UCpTiVC,EAAA,0BCQjVC,EAAgBjH,OAAAkH,EAAA,KAAAlH,CACdgH,EACAhM,EACA2C,GACF,EACA,KACA,WACA,MAIAsJ,EAAAE,QAAAC,OAAA,cACeC,EAAA,WAAAJ","file":"static/js/chunk-cd508288.2871f264.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Meeting.vue?vue&type=style&index=0&id=2dfe161e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Meeting.vue?vue&type=style&index=0&id=2dfe161e&lang=scss&scoped=true&\"","'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"layer-list-wrapper\"},[_c('div',{staticClass:\"layer-list\"},_vm._l((_vm.layers),function(layer,i){return _c('div',{staticClass:\"layer\",style:(_vm.layerStyles[i])},[_c('div',{staticClass:\"layer__word\",style:(_vm.keywordStyles[i])},[_vm._v(_vm._s(layer.words[0]))]),_vm._l((layer.related_contents),function(content,j){return _c('img',{key:content.id,ref:\"images\",refInFor:true,staticClass:\"layer__img\",style:(_vm.imageStyles[i]),attrs:{\"data-layer-id\":layer.id,\"data-content-id\":content.id,\"src\":content.img_url},on:{\"click\":function($event){_vm.onClickImage(content)}}})})],2)}))]),_vm._l((_vm.contextMenuStatuses),function(stat){return [_c('div',{ref:stat.refName,refInFor:true,staticClass:\"context-menu\",style:(stat.style)},[_vm._v(\"\\n      ユーザー 000\"+_vm._s(stat.floorId)+\" \"),_c('br'),_vm._v(\"\\n      のメニュー\\n    \")])]}),(_vm.isShowContentDetailModal)?[_c('div',{staticClass:\"modal is-active\"},[_c('div',{staticClass:\"modal-background\",on:{\"click\":function($event){$event.preventDefault();return _vm.closeContentDetailModal($event)}}}),(_vm.currentDetailModalContent)?_c('div',{staticClass:\"modal-content\",style:(_vm.currentDetailModalStyle)},[_c('p',[_vm._v(_vm._s(_vm.currentDetailModalContent.title))]),_c('p',{staticClass:\"image is-4by3\"},[_c('img',{attrs:{\"src\":_vm.currentDetailModalContent.img_url,\"alt\":\"\"}})]),_c('p',[_vm._v(_vm._s(_vm.currentDetailModalContent.desc))])]):_vm._e(),_c('button',{staticClass:\"modal-close is-large\",attrs:{\"aria-label\":\"close\"}})])]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <!--<h1>Let's Talk!!</h1>-->\n  <!--レイヤーと奥行き表示ロジック-->\n  <!--<div>TODO コンテキストメニュー＋QRコード</div>-->\n  <!--<div>TODO コンテキスト（leave確認）</div>-->\n  <div class=\"wrapper\">\n    <div class=\"layer-list-wrapper\">\n      <div class=\"layer-list\">\n        <div class=\"layer\" :style=\"layerStyles[i]\" v-for=\"layer, i in layers\">\n          <div class=\"layer__word\" :style=\"keywordStyles[i]\">{{ layer.words[0] }}</div>\n          <img ref=\"images\" class=\"layer__img\" :style=\"imageStyles[i]\" v-for=\"content, j in layer.related_contents\" :key=\"content.id\" :data-layer-id=\"layer.id\" :data-content-id=\"content.id\" :src=\"content.img_url\" @click=\"onClickImage(content)\" />\n        </div>\n      </div>\n    </div>\n    <template v-for=\"stat in contextMenuStatuses\">\n      <div\n        class=\"context-menu\"\n        :style=\"stat.style\"\n        :ref=\"stat.refName\"\n      >\n        ユーザー 000{{stat.floorId}} <br>\n        のメニュー\n      </div>\n    </template>\n    <template v-if=\"isShowContentDetailModal\">\n      <div class=\"modal is-active\">\n        <div class=\"modal-background\" @click.prevent=\"closeContentDetailModal\"></div>\n        <!--<div class=\"modal-background\"></div>-->\n        <div class=\"modal-content\" v-if=\"currentDetailModalContent\" :style=\"currentDetailModalStyle\">\n          <p>{{ currentDetailModalContent.title }}</p>\n          <p class=\"image is-4by3\">\n            <img :src=\"currentDetailModalContent.img_url\" alt=\"\">\n          </p>\n          <p>{{ currentDetailModalContent.desc }}</p>\n        </div>\n        <button class=\"modal-close is-large\" aria-label=\"close\"></button>\n      </div>\n    </template>\n\n  </div>\n</template>\n\n<script>\nimport client from \"@/core/ApiClient\";\nimport _ from \"lodash\";\nimport customTouchEventDriver from \"@/mixins/customTouchEventDriver\";\nimport Hammer from \"hammerjs\";\n\nconst START_Z_AXIS = 50; // 先頭z座標\nconst Z_STEP = 10; // 1レイヤー間のz深度\nconst SHOW_LAYER_NUM = 10 // 階層数\n\nexport default {\n  name: \"Meeting\",\n  mixins: [customTouchEventDriver],\n  created() {\n    const opts = {\n      wallId: this.$route.params.wallId\n    };\n    startRecognizeSpeachSDK(opts);\n    // TODO transcriptsの取得\n    this.fetchTranscripts();\n    this.listenPersonalTouch();\n\n    this.initializePinchEvent();\n  },\n  data() {\n    return {\n      layers: [],\n      isShowContentDetailModal: false,\n      currentContentDetailModalFloor: false,\n      currentDetailModalContent: null,\n      currentDetailModalStyle: {},\n      contextMenuStatuses: [],\n      layerStyles: _.range(10).map((i) => {\n        return this.getComputedStyleForLayer(i);\n      }),\n      keywordStyles: _.range(10).map(() => {\n        return this.getRandomStyleForKeyWord()\n      }),\n      imageStyles: _.range(10).map(() => {\n        return this.getRandomStyleForImage();\n      }),\n    }\n  },\n  computed: {\n  },\n  methods: {\n    listenPersonalTouch() {\n      window.addEventListener('CUSTOM_TOUCH_START', this.onClickTable);\n    },\n    async fetchTranscripts() {\n      const wallId = this.$route.params.wallId;\n      const url = `/api/transcripts/${wallId}`;\n      const res = await client.get(url);\n\n      // 整形\n      const {\n        searches,\n        search_first_index,\n        search_last_index,\n        related_contents,\n        related_content_last_index\n      } = res.data;\n\n      const layers = searches.map(s => {\n        s.related_contents = related_contents.filter(r => ( r.transcript_id === s.transcript_id ));\n        return s;\n      });\n\n      this.layers = layers;\n    },\n    onClickImage({floorId, contentId}) {\n      this.openContentDetailModal({floorId, contentId});\n    },\n    openContentDetailModal({floorId, contentId}) {\n      if (this.isShowContentDetailModal) {\n        return;\n      }\n\n      // ID識別で向きを変える\n      const layer = this.layers.find(l => {\n        return l.related_contents.find(c => ( c.id === contentId ));\n      });\n\n      if (!layer) {\n        return false;\n      }\n\n      const content = layer.related_contents.find(c => ( c.id === contentId ));\n      this.currentDetailModalStyle = this.getModalStyleByFloorId(floorId);\n      this.currentDetailModalContent = content;\n      this.isShowContentDetailModal = true;\n      this.contentDetailOpenTime = new Date().getTime();\n    },\n    closeContentDetailModal() {\n      const waitTime = 1000;\n      const time = new Date().getTime() - this.contentDetailOpenTime;\n      if (time <= waitTime) {\n        return false;\n      }\n      this.isShowContentDetailModal = false;\n    },\n    onClickTable(evt) {\n      // TODO シーン判別のようなものを追加\n      // TODO 長押しで開く\n      const touch = evt.detail[0];\n\n      // NOTE 画像触ったら反応しない\n      let isTouchImage = false;\n      let touchedImage;\n\n      const touchedImages = [];\n      this.$refs.images.forEach((img) => {\n        const rect = img.getBoundingClientRect();\n        if (this.isTouchObjectByRect(touch, rect)) {\n          isTouchImage = true;\n          touchedImages.push(img);\n          return false;\n        }\n      });\n\n      if (isTouchImage) {\n        // TODO: 先頭だけ取り出す 要ブラッシュアップ\n        touchedImages.sort((a, b) => {\n          const aId = Number(a.getAttribute('data-content-id'));\n          const bId = Number(b.getAttribute('data-content-id'));\n          return aId < bId ? -1 : 1;\n        });\n\n        const latestTouchedImage = touchedImages[0];\n\n        const floorId = touch.floorId;\n        const contentId = Number(latestTouchedImage.getAttribute('data-content-id'));\n        this.onClickImage({floorId, contentId});\n        return false;\n      }\n\n      // NOTE: refsは配列で返ってくる\n      const existRef = this.$refs[`context-menu-${touch.floorId}`];\n      if (\n        existRef &&\n        existRef.length > 0 &&\n        !this.isTouchObjectByRect(touch, existRef[0].getBoundingClientRect())\n      ) {\n        this.closeContextMenu(touch);\n      } else if (\n        this.contextMenuStatuses\n          .filter(\n            d => (d.floorId === touch.floorId)\n          ).length === 0\n      ) {\n        this.openContextMenu(touch);\n      }\n    },\n    openContextMenu(touch) {\n      const d = this.getTransformDegByFloorId(touch.floorId);\n      const style = {\n        left: `${touch.x}px`,\n        top: `${touch.y}px`,\n        transform: `rotate(${d}deg)`,\n      };\n      const refName = `context-menu-${touch.floorId}`;\n      const status = {\n        floorId: touch.floorId,\n        style,\n        refName\n      };\n      this.contextMenuStatuses.push(status);\n    },\n    closeContextMenu(touch) {\n      const floorId = touch.floorId;\n      this.contextMenuStatuses = this.contextMenuStatuses.filter(s => s.floorId !== floorId);\n    },\n    getStyleByContextMenuPosition() {\n      // TODO タッチ位置に合わせて出す位置調整\n    },\n    openPinList() {\n      // ピン一覧\n    },\n    createPin() {\n      // TODO ピンする\n    },\n    removePin() {\n      // TODO アンピンする\n    },\n    offRecord() {\n      // TODO オフレコにする\n    },\n    leave() {\n      // TODO 退席\n    },\n    exitWall() {\n      // TODO 会議終了\n    },\n    removeContent() {\n      // TODO コンテンツを消す\n    },\n    removeWord() {\n      // TODO ワードを消す\n    },\n    getRandomStyleForImage() {\n      const x = _.random(window.innerWidth);\n      const y = _.random(window.innerHeight);\n      const style = {\n        left: `${x}px`,\n        top: `${y}px`,\n      };\n      return style;\n    },\n    getRandomStyleForKeyWord() {\n      const x0 = 800;\n      const y0 = 600;\n      const x = _.random(x0, window.innerWidth - x0);\n      const y = _.random(y0, window.innerHeight - y0);\n      const style = {\n        left: `${x}px`,\n        top: `${y}px`,\n      };\n      return style;\n    },\n    getComputedStyleForLayer(index) {\n      const z = START_Z_AXIS - (index * Z_STEP);\n      const alpha = 1 - (index * 0.08);\n      const zIndex = SHOW_LAYER_NUM - index;\n      const style = {\n        transform: `translate3D(0px, 0px, ${z}px)`,\n        opacity: alpha,\n        zIndex\n      };\n      return style;\n    },\n    getModalStyleByFloorId(floorId) {\n      const d = this.getTransformDegByFloorId(floorId);\n      return { transform: `rotate(${d}deg)` };\n    },\n    getTransformDegByFloorId(floorId) {\n      const map = {\n        1: 0,\n        2: 90,\n        3: 180,\n        4: 270\n      };\n\n      return map[floorId];\n    },\n    initializePinchEvent() {\n      const square = document.querySelector('#app');\n      const hammer = new Hammer(square);\n      hammer.get('pinch').set({ enable: true });\n      hammer.on('pinchout', (e) => {\n        this.logType('pinchout');\n        this.logEvent(e);\n      });\n      hammer.on('pinchin', (e) => {\n        this.logType('pinchin');\n        this.logEvent(e);\n      });\n      hammer.on('pinchmove', (e) => {\n        this.logType('pinchmove');\n        this.logEvent(e);\n      });\n    },\n    logType(type) {\n      console.log(type);\n    },\n    logEvent(e) {\n      this.pinchScale = e.scale;\n      console.log(e.scale);\n    },\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.wrapper {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.layer-list-wrapper {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  perspective: 100px;\n  perspective-origin: center center;\n\n  // TODO仮\n  font-size: 10rem;\n}\n\n.layer-list {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  transform-origin: center center;\n  transform-style: preserve-3D;\n}\n\n.layer {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  display: flex;\n}\n\n.layer__img {\n  position: absolute;\n  max-width: 600px;\n  max-height: 600px;\n}\n\n.layer__word {\n  position: absolute;\n  color: darkred;\n  font-weight: bold;\n}\n\n.context-menu {\n  position: absolute;\n  width: 400px;\n  height: 600px;\n  background: #f2f2f2;\n\n  font-sizd: 2vw;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.modal-content {\n  font-size: 2vw;\n  color: #fff;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Meeting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Meeting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Meeting.vue?vue&type=template&id=2dfe161e&scoped=true&\"\nimport script from \"./Meeting.vue?vue&type=script&lang=js&\"\nexport * from \"./Meeting.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Meeting.vue?vue&type=style&index=0&id=2dfe161e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2dfe161e\",\n  null\n  \n)\n\ncomponent.options.__file = \"Meeting.vue\"\nexport default component.exports"],"sourceRoot":""}