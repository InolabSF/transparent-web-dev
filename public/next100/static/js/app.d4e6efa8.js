(function(e){function t(t){for(var o,r,c=t[0],s=t[1],u=t[2],l=0,d=[];l<c.length;l++)r=c[l],a[r]&&d.push(a[r][0]),a[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={app:0},a={app:0},i=[];function c(e){return s.p+"static/js/"+({}[e]||e)+"."+{"chunk-0442dfba":"20646314","chunk-2d0aa5b8":"fc44a058","chunk-0da20002":"b72570fa","chunk-1a7e384e":"fc83a066","chunk-2d217ffe":"3543320f","chunk-2d633280":"c6008168","chunk-40fc1924":"68f48171","chunk-a32405ec":"cd15cc5c","chunk-2d237d13":"5694610d","chunk-2dc2070c":"1ca2e96c","chunk-608aa4b6":"59c43339","chunk-6dd41ba2":"06334d60","chunk-701c72bc":"9939a4af","chunk-a00acac8":"ad46c44e","chunk-e99b2cea":"b189554a"}[e]+".js"}function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-0442dfba":1,"chunk-0da20002":1,"chunk-1a7e384e":1,"chunk-2d633280":1,"chunk-40fc1924":1,"chunk-a32405ec":1,"chunk-2dc2070c":1,"chunk-608aa4b6":1,"chunk-6dd41ba2":1,"chunk-701c72bc":1,"chunk-a00acac8":1,"chunk-e99b2cea":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise(function(t,n){for(var o="static/css/"+({}[e]||e)+"."+{"chunk-0442dfba":"091569a3","chunk-2d0aa5b8":"31d6cfe0","chunk-0da20002":"d9440888","chunk-1a7e384e":"83569553","chunk-2d217ffe":"31d6cfe0","chunk-2d633280":"2b345e71","chunk-40fc1924":"fd44a5b2","chunk-a32405ec":"2e5c8053","chunk-2d237d13":"31d6cfe0","chunk-2dc2070c":"88d01122","chunk-608aa4b6":"7ce9b2af","chunk-6dd41ba2":"90d12f6a","chunk-701c72bc":"cf679d23","chunk-a00acac8":"903c6d8c","chunk-e99b2cea":"2103383b"}[e]+".css",r=s.p+o,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var c=a[i],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===o||u===r))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){c=l[i],u=c.getAttribute("data-href");if(u===o||u===r)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var o=t&&t.target&&t.target.src||r,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.request=o,n(a)},d.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(d)}).then(function(){r[e]=0}));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var i=new Promise(function(t,n){o=a[e]=[t,n]});t.push(o[2]=i);var u,l=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=c(e),u=function(t){d.onerror=d.onload=null,clearTimeout(f);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+o+": "+r+")");i.type=o,i.request=r,n[1](i)}a[e]=void 0}};var f=setTimeout(function(){u({type:"timeout",target:d})},12e4);d.onerror=d.onload=u,l.appendChild(d)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/next100/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("c21b"),r=n.n(o);r.a},"0933":function(e,t,n){},"0e65":function(e,t,n){"use strict";var o=n("20d5"),r=n.n(o);r.a},1:function(e,t){},"1c7e":function(e,t,n){},"20d5":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"mobile"===e.$route.meta.layout?n("mobile-layout",[n("router-view")],1):n("default-layout",[n("router-view")],1)},a=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("modal",{staticClass:"wrapper",attrs:{name:"hello-world"}},[n("div",{staticClass:"p4"},[n("label",{staticClass:"block"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedMode,expression:"selectedMode"}],attrs:{type:"radio",name:"selectedMode",value:"production"},domProps:{checked:e._q(e.selectedMode,"production")},on:{change:function(t){e.selectedMode="production"}}}),e._v(" 本番モード（要専用ドライバ）\n    ")]),n("label",{staticClass:"block"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedMode,expression:"selectedMode"}],attrs:{type:"radio",name:"selectedMode",value:"preview"},domProps:{checked:e._q(e.selectedMode,"preview")},on:{change:function(t){e.selectedMode="preview"}}}),e._v(" プレビューモード（Webブラウザ単体で動きます）\n    ")]),n("label",{staticClass:"block"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedMode,expression:"selectedMode"}],attrs:{type:"radio",name:"selectedMode",value:"developer"},domProps:{checked:e._q(e.selectedMode,"developer")},on:{change:function(t){e.selectedMode="developer"}}}),e._v(" 開発者専用モード\n    ")]),n("div",[n("button",{attrs:{type:"submit"},on:{click:e.onClickSelectMode}},[e._v("OK")])]),n("div",[n("small",[n("router-link",{attrs:{to:"/test-index"}},[e._v("モックindex")])],1)])])])},c=[],s=n("c93e"),u=n("f633"),l=n("2f62"),d={name:"ModeSelectModal",mixins:[u["a"]],data:function(){return{selectedMode:"production"}},computed:Object(s["a"])({},Object(l["b"])(["isModeSelectFinished"])),methods:{onClickSelectMode:function(){this.$store.commit("setState",{customTouchMode:this.selectedMode}),this.startObserver(),this.$store.commit("setState",{isModeSelectFinished:!0}),this.$modal.hide("hello-world")}}},f=d,h=(n("0e65"),n("2877")),m=Object(h["a"])(f,i,c,!1,null,"52541d38",null);m.options.__file="ModeSelectModal.vue";m.exports;var p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"debug-control",on:{click:e.test}},[n("label",{staticClass:"block"},[e._v("\n    固定フロアID:\n    "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.floorId,expression:"floorId"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.floorId=t.target.multiple?n:n[0]},e.onChangeFloorId]}},[n("option",{attrs:{value:"1"}},[e._v("1")]),n("option",{attrs:{value:"2"}},[e._v("2")]),n("option",{attrs:{value:"3"}},[e._v("3")]),n("option",{attrs:{value:"4"}},[e._v("4")])])])])},v=[],b=(n("c5f6"),{name:"DebugControl",data:function(){return{floorId:this.debugParams.currentFloorId}},computed:Object(s["a"])({},Object(l["b"])(["debugParams"])),methods:{test:function(e){},onChangeFloorId:function(){this.$store.commit("setDebugParams",{currentFloorId:Number(this.floorId)})}}}),g=b,y=(n("9ef5"),Object(h["a"])(g,p,v,!1,null,"82d8ce16",null));y.options.__file="DebugControl.vue";var k=y.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:e.$route.name}},[n("div",{attrs:{id:"wrapper"}},[e._t("default"),n("div",{class:{"is-small":e.isSmallHue},attrs:{id:"hue"}}),"opening"!==e.$route.name?n("user-layer"):e._e()],2)])])},w=[],I=(n("6762"),n("386d"),n("72bf")),C=n.n(I),T=n("5ab3"),O={name:"DefaultLayout",mixins:[u["a"]],components:{UserLayer:T["a"]},created:function(){this.initCustomTouchMode(),this.initUserSwitchDebugger()},computed:Object(s["a"])({},Object(l["b"])(["isSmallHue"])),methods:{initCustomTouchMode:function(){var e=["production","preview","development"],t=C.a.parse(location.search),n=t.mode,o=localStorage.getItem("customTouchMode");!n&&"production"!==o&&confirm("".concat(o,"モードで再開しますか？"))&&(n=o),e.includes(n)||(n="production"),console.log("mode:"+n),this.$store.commit("setState",{customTouchMode:n}),localStorage.setItem("customTouchMode",n),this.startObserver()},initUserSwitchDebugger:function(){var e=this,t=this.$store.state.customTouchMode;"preview"===t&&window.addEventListener("keydown",function(t){var n=e.$store.state.debugParams.currentFloorId;if("ArrowLeft"===t.code){var o=n-1>=1?n-1:1;e.$store.commit("setDebugParams",{currentFloorId:o})}else if("ArrowRight"===t.code){var r=n+1<=4?n+1:4;e.$store.commit("setDebugParams",{currentFloorId:r})}})}}},M=O,U=Object(h["a"])(M,_,w,!1,null,null,null);U.options.__file="DefaultLayout.vue";var S=U.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"mobile"}},[e._t("default")],2)},E=[],P={name:"MobileLayout"},j=P,$=Object(h["a"])(j,x,E,!1,null,null,null);$.options.__file="MobileLayout.vue";var F=$.exports,L={name:"App",components:{DebugControl:k,DefaultLayout:S,MobileLayout:F},created:function(){var e=this;setTimeout(function(){e.showSettingModal()}),window.addEventListener("contextmenu",function(e){e.preventDefault()},!1)},methods:{showSettingModal:function(){this.$modal.show("hello-world")}}},B=L,D=(n("034f"),Object(h["a"])(B,r,a,!1,null,null,null));D.options.__file="App.vue";var N=D.exports,R=n("8c4f");o["a"].use(R["a"]);var H=new R["a"]({mode:"history",base:"/next100/",routes:[{path:"/test-index",name:"test-index",component:function(){return n.e("chunk-6dd41ba2").then(n.bind(null,"f819"))}},{path:"/meeting-test",name:"meeting-test",component:function(){return Promise.all([n.e("chunk-2d0aa5b8"),n.e("chunk-1a7e384e")]).then(n.bind(null,"08bb"))}},{path:"/test-log",name:"test-log",component:function(){return n.e("chunk-701c72bc").then(n.bind(null,"bf80"))}},{path:"/test-hold",name:"test-hold",component:function(){return n.e("chunk-e99b2cea").then(n.bind(null,"cd77"))}},{path:"/test-pinch",name:"test-pinch",component:function(){return Promise.all([n.e("chunk-2d0aa5b8"),n.e("chunk-2d217ffe"),n.e("chunk-a32405ec")]).then(n.bind(null,"15f7"))}},{path:"/test-scroll",name:"test-scroll",component:function(){return n.e("chunk-0442dfba").then(n.bind(null,"2f15"))}},{path:"/test-hit",name:"test-hit",component:function(){return n.e("chunk-a00acac8").then(n.bind(null,"6abc"))}},{path:"/test-transcripts/:wallId",name:"test-transcripts",component:function(){return Promise.all([n.e("chunk-2d0aa5b8"),n.e("chunk-2d217ffe"),n.e("chunk-40fc1924")]).then(n.bind(null,"6fba"))}},{path:"/",name:"opening",component:function(){return Promise.all([n.e("chunk-2d0aa5b8"),n.e("chunk-0da20002")]).then(n.bind(null,"bb51"))}},{path:"/welcome",name:"welcome",component:function(){return n.e("chunk-2dc2070c").then(n.bind(null,"eec5"))}},{path:"/walls/:wallId/meeting",name:"meeting",component:function(){return Promise.all([n.e("chunk-2d0aa5b8"),n.e("chunk-2d217ffe"),n.e("chunk-2d633280")]).then(n.bind(null,"d13f"))}},{path:"/walls/:wallId/logs",name:"wallLogs",component:function(){return n.e("chunk-2d237d13").then(n.bind(null,"fd76"))},meta:{layout:"mobile"}},{path:"*",name:"notFound",component:function(){return n.e("chunk-608aa4b6").then(n.bind(null,"9703"))}}]});n("7514"),n("f751"),n("7f7f");o["a"].use(l["a"]);var A=localStorage.getItem("loginUsers"),q=A?JSON.parse(A):[],W=!!A&&confirm("前回のログイン状態を復元しますか？\n".concat(q.map(function(e){return"電極".concat(e.floorId,": ").concat(e.name)}).join("\n"))),J=W?q:[];W||localStorage.removeItem("loginUsers");var Q=new l["a"].Store({state:{loginUsers:J||[],isModeSelectFinished:!1,customTouchMode:"production",debugParams:{currentFloorId:1},touchingQueues:[],isStartTalkModal:!1,isSmallHue:!1},mutations:{setState:function(e,t){e=Object.assign(e,t)},addLoginUser:function(e,t){e.loginUsers.push(t)},removeLoginUser:function(e,t){e.loginUsers=e.loginUsers.filter(function(e){return e.floorId!==t})},updateLoginUser:function(e,t){var n=t.floorId,o=t.params,r=e.loginUsers.find(function(e){return e.floorId===n});Object.assign(r,o)},enqueueTouchingQueue:function(e,t){var n=t.floorId,o=t.time;e.touchingQueues.push({floorId:n,time:o})},dequeueTouchingQueue:function(e,t){var n=t.floorId;e.touchingQueues=e.touchingQueues.filter(function(e){return e.floorId==n})},setDebugParams:function(e,t){e.debugParams=Object.assign(e.debugParams,t)},addPinByFloorId:function(e,t){var n=t.floorId,o=t.content;e.loginUsers=e.loginUsers.map(function(e){return e.floorId===n?(e.pinnedContents.push(o),e):e})},deletePinByFloorId:function(e,t){var n=t.floorId,o=t.contentId;e.loginUsers=e.loginUsers.map(function(e){return e.floorId===n?(e.pinnedContents=e.pinnedContents.filter(function(e){return e.id!==o}),e):e})}},actions:{}}),V=n("1881"),X=n.n(V),z=n("8d29");n("77ed");o["a"].config.productionTip=!1,o["a"].use(X.a),o["a"].mixin(z["a"]),o["a"].mixin(u["a"]),new o["a"]({router:H,store:Q,render:function(e){return e(N)}}).$mount("#app")},"5ab3":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"user-layer"}},e._l(e.loginUsers,function(e){return n("user-profile",{key:e.floorId,attrs:{user:e}})}))},r=[],a=n("c93e"),i=n("2f62"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.userClass(),attrs:{"data-color":e.userColor()}},[n("div",{staticClass:"touch-state-box"},[e.user.isStartTalkModal?[n("p",{staticClass:"state-text animated fadeInUp"},[e._v("START!")]),e._m(0),n("div",{staticClass:"btn return",on:{click:e.onClickReturn}},[e._m(1)])]:e.isWelcome?[n("transition",{attrs:{"enter-active-class":"animated fadeInUp","leave-active-class":"animated fadeOut"}},[n("p",{staticClass:"state-text "},[e._v("WELCOME!")])])]:"welcome"===e.$route.name?[n("p",{staticClass:"state-text"},[e._v("TOUCH!")]),e._m(2)]:e._e()],2),n("div",{staticClass:"user-avatar animated fadeInUp fast delay-1s"}),n("div",{staticClass:"user-name animated fadeInUp fast delay-2s"},[e._v(e._s(e.user.name))])])},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("figure",{staticClass:"icon-touch animated zoomIn fast delay-1s"},[n("img",{attrs:{src:"/next100/static/img/icon-touch01.svg",alt:"TOUCH"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:"#"}},[n("img",{attrs:{src:"/next100/static/img/btn_return01.svg",alt:"RETURN"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("figure",{staticClass:"icon-touch"},[n("img",{attrs:{src:"/next100/static/img/icon-touch01.svg",alt:"TOUCH"}})])}],u=n("a322"),l={name:"UserProfile",props:{user:{type:Object,required:!0}},data:function(){return{isWelcome:!0}},created:function(){var e=this;setTimeout(function(){e.isWelcome=!1},2e3)},methods:{userClass:function(){var e,t=this.getDirectionClassByFloorId(this.user.floorId),n=(e={},Object(u["a"])(e,"user-".concat(t),!0),Object(u["a"])(e,"user-box",!0),e);return n},getDirectionClassByFloorId:function(){var e={1:"bottom",2:"left",3:"top",4:"right"};return e[this.user.floorId]},onClickReturn:function(){this.$store.commit("updateLoginUser",{floorId:this.user.floorId,params:{isStartTalkModal:!1}})},userColor:function(){var e=this.getColorMap();return e[this.user.floorId]}}},d=l,f=(n("e0a1"),n("2877")),h=Object(f["a"])(d,c,s,!1,null,"b34c7e24",null);h.options.__file="UserProfile.vue";var m=h.exports,p={name:"UserLayer",components:{UserProfile:m},data:function(){return{isWelcome:!0}},methods:{},computed:Object(a["a"])({},Object(i["b"])(["loginUsers"]))},v=p,b=(n("7020"),Object(f["a"])(v,o,r,!1,null,"844c669a",null));b.options.__file="UserLayer.vue";t["a"]=b.exports},7020:function(e,t,n){"use strict";var o=n("1c7e"),r=n.n(o);r.a},"8d29":function(e,t,n){"use strict";n("96cf");var o=n("3040"),r=(n("7f7f"),n("7514"),n("cadf"),n("551c"),n("097d"),n("a5bc")),a=4;t["a"]={methods:{login:function(e){var t=!!this.$store.state.loginUsers.find(function(t){return t.floorId===e});if(t)return!1;var n={floorId:e,name:"guest100".concat(e),pinnedContents:[],isStartTalkModal:!1};if(!(this.$store.state.loginUsers.length<a))throw"参加人数は4名まで";this.$store.commit("addLoginUser",n),this.syncLoginUserToLocalStorage()},logout:function(e){this.$store.commit("removeLoginUser",e),this.syncLoginUserToLocalStorage()},syncLoginUserToLocalStorage:function(){localStorage.setItem("loginUsers",JSON.stringify(this.$store.state.loginUsers))},getStyleByFloorId:function(e){var t={1:{bottom:0,left:"auto",right:"auto"},2:{bottom:"auto",left:0,top:"auto"},3:{top:0,left:"auto",right:"auto"},4:{bottom:"auto",right:0,top:"auto"}};return t[e]},getUserByFloorId:function(e){var t=this.$store.state.loginUsers.find(function(t){return t.floorId===e});return t},isPinedByFloorId:function(e,t){var n=this.getUserByFloorId(e);return n.pinnedContents.find(function(e){return e.id===t})},togglePinByFloorId:function(e,t){var n=this.getUserByFloorId(e),o=this.isPinedByFloorId(e,t.id);o?(this.$store.commit("deletePinByFloorId",{floorId:e,contentId:t.id}),this.deletePinByFloorId(t.id,n.name)):(this.$store.commit("addPinByFloorId",{floorId:e,content:t}),this.postPinByFloorId(t.id,n.name))},postPinByFloorId:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var o,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o="/next100/pins",a={eventuser_id:n,related_content_id:t},e.next=4,r["a"].post(o,a).catch(function(){return!1});case 4:return i=e.sent,e.abrupt("return",!!i);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),deletePinByFloorId:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,n){var o,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o="/next100/pins",a={data:{eventuser_id:n,related_content_id:t}},e.next=4,r["a"].delete(o,a).catch(function(){return!1});case 4:return i=e.sent,e.abrupt("return",!!i);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),getColorMap:function(){var e={1:"green",2:"red",3:"yellow",4:"blue"};return e}}}},"9ef5":function(e,t,n){"use strict";var o=n("0933"),r=n.n(o);r.a},a5bc:function(e,t,n){"use strict";var o=n("8206"),r=n.n(o),a=n("8039"),i=r.a.create({baseURL:"https://trnspt.com"});i.interceptors.request.use(function(e){return e.headers["Content-Type"]="application/json",e.headers["X-CSRF-Token"]=Object(a["csrfToken"])(),e},function(e){return Promise.reject(e)}),t["a"]=i},ba85:function(e,t,n){},c21b:function(e,t,n){},e0a1:function(e,t,n){"use strict";var o=n("ba85"),r=n.n(o);r.a},f633:function(e,t,n){"use strict";n("456d"),n("ac6a"),n("cadf"),n("551c"),n("097d");var o=n("8206"),r=n.n(o),a=n("8055"),i=n.n(a),c=n("2ef0"),s=n.n(c),u=r.a.create({baseURL:"http://localhost:8888"}),l=32768;t["a"]={methods:{startObserver:function(){var e=this.$store.state.customTouchMode;"developer"!==e&&"preview"!==e||this.observeBrowserTouchEvent(),"developer"!==e&&"production"!==e||this.observeEventFromDriver()},observeBrowserTouchEvent:function(){window.addEventListener("touchstart",this.handleNativeTouchEvent("touchstart","CUSTOM_TOUCH_START")),window.addEventListener("touchend",this.handleNativeTouchEvent("touchend","CUSTOM_TOUCH_END")),window.addEventListener("touchmove",this.handleNativeTouchEvent("touchmove","CUSTOM_TOUCH_MOVE"))},handleNativeTouchEvent:function(e,t){var n=this;return function(o){for(var r=n.$store.state.debugParams.currentFloorId,a=[],i=0;i<o.changedTouches.length;i++){var c=o.changedTouches[i],s=n.getConvertedPosition(c),u={type:e,identify:i+1,floorId:r,x:s.x,y:s.y};a.push(u)}var l=n.$store.state.customTouchMode;if("developer"===l)n.sendDriver(a);else if("preview"===l){var d=n.filterData(a),f={detail:d},h=new CustomEvent(t,f);window.dispatchEvent(h)}}},getConvertedPosition:function(e){var t=e.clientX,n=e.clientY,o=l;return{x:s.a.round(o*t/window.innerWidth),y:s.a.round(o*n/window.innerHeight)}},observeEventFromDriver:function(){var e=i()("http://localhost:8888");e.on("emit_from_server",this.dispatchCustomEventByStream)},dispatchCustomEventByStream:function(e){var t=this.filterData(JSON.parse(e)),n={touchstart:[],touchmove:[],touchend:[]},o={touchstart:"CUSTOM_TOUCH_START",touchmove:"CUSTOM_TOUCH_MOVE",touchend:"CUSTOM_TOUCH_END"};t.forEach(function(e){n[e.type]&&n[e.type].push(e)}),Object.keys(n).forEach(function(e){var t=n[e];if(!t.length)return!1;var r={detail:t},a=new CustomEvent(o[e],r);window.dispatchEvent(a)})},filterData:function(e){var t=e.map(function(e){var t=e;return t.x=e.x/l*window.innerWidth,t.y=e.y/l*window.innerHeight,e});return t=t.filter(function(e){return 0!==e.floorId}),t},sendDriver:function(e){u.get("/?_= ".concat(JSON.stringify(e)))},isTouchObjectByElement:function(e,t){var n=t.getBoundingClientRect();if(!n)throw new Error("cannnot get client rect");return this.isTouchObjectByRect(e,n)},isTouchObjectByRect:function(e,t){var n=t.x,o=t.y,r=t.width,a=t.height;return e.x<=n+r&&e.x>=n&&e.y<=o+a&&e.y>=o}}}}});
//# sourceMappingURL=app.d4e6efa8.js.map