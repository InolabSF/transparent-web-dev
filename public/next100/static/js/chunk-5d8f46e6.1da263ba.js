(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d8f46e6"],{"2bf5":function(t,e,n){"use strict";var i=n("9eb1"),r=n.n(i);r.a},"2f21":function(t,e,n){"use strict";var i=n("79e5");t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},"35df":function(t,e,n){"use strict";var i=n("a984"),r=n.n(i);r.a},"55dd":function(t,e,n){"use strict";var i=n("5ca1"),r=n("d8e8"),a=n("4bf8"),s=n("79e5"),o=[].sort,l=[1,2,3];i(i.P+i.F*(s(function(){l.sort(void 0)})||!s(function(){l.sort(null)})||!n("2f21")(o)),"Array",{sort:function(t){return void 0===t?o.call(a(this)):o.call(a(this),r(t))}})},"87fd":function(t,e,n){},"9eb1":function(t,e,n){},a984:function(t,e,n){},b677:function(t,e,n){"use strict";var i=n("eaf5"),r=n.n(i);r.a},c55d:function(t,e,n){"use strict";var i=n("87fd"),r=n.n(i);r.a},d13f:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=this,n=e.$createElement,i=e._self._c||n;return i("div",[e._m(0),e.positionMap.length>0?i("div",{attrs:{id:"media-leyer"}},[i("transition-group",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},e._l(e.layers,function(t,n){return e.minLayerIndex<=n&&n<=e.maxLayerIndex?i("div",{key:n,staticClass:"post transit"},[i("div",{staticClass:"media-container",style:e.getLayerStyle(n),attrs:{"data-keyword-color":e.getKeywordColor(n)}},[e._l(t.related_contents,function(r,a){return i("div",{key:r.id,staticClass:"item",style:e.getImageStyle(n,a),attrs:{"data-layer-id":t.id,"data-content-id":r.id}},[i("div",{staticClass:"media-photo"},[i("img",{ref:"images",refInFor:!0,staticClass:"img",attrs:{src:r.img_url,"data-content-id":r.id}}),i("ul",{staticClass:"pin-list"}),i("button",{staticClass:"btn-pin"})])])}),i("div",{staticClass:"item",style:e.getImageStyle(n,t.related_contents.length)},[i("div",{staticClass:"keyword-box",attrs:{"data-searchid":"27093"}},[i("div",{staticClass:"time-stamp"},[e._v("00:39:01")]),i("div",{staticClass:"keyword-text"},[i("span",[e._v(e._s(t.words[0]))])])])])],2)]):e._e()}))],1):e._e(),e._m(1),i("image-detail-modal",{attrs:{isShow:e.isShowContentDetailModal,onClose:e.closeContentDetailModal,content:e.currentDetailModalContent,floorId:e.currentContentDetailModalFloor}}),e._l(e.contextMenuStatuses,function(t,n){return t?i("context-menu",{key:n,ref:t.refName,refInFor:!0,attrs:{status:t,onClickPinList:function(){e.isShowPinListModal=!0},onClickExitMeeting:function(){e.isShowPinListModal=!0,e.isConfirmExit=!0},onClickOffMic:function(){e.isRecording=!1},onClickCloseButton:function(){e.closeContextMenu(t.floorId)}}}):e._e()}),e.isShowPinListModal?i("pin-list",{attrs:{onClose:function(){t.isShowPinListModal=!1},isConfirmExit:e.isConfirmExit}}):e._e()],2)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"is-move",attrs:{id:"grid-layer"}},[n("div",{staticClass:"grid"},[n("span",{staticClass:"line"})]),n("div",{staticClass:"grid"},[n("span",{staticClass:"line"})]),n("div",{staticClass:"grid"},[n("span",{staticClass:"line"})]),n("div",{staticClass:"grid"},[n("span",{staticClass:"line"})]),n("div",{staticClass:"grid"},[n("span",{staticClass:"line"})]),n("div",{staticClass:"grid"},[n("span",{staticClass:"line"})]),n("div",{staticClass:"grid"},[n("span",{staticClass:"line"})]),n("div",{staticClass:"grid"},[n("span",{staticClass:"line"})]),n("div",{staticClass:"grid"},[n("span",{staticClass:"line"})]),n("div",{staticClass:"grid"},[n("span",{staticClass:"line"})])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"media-send-leyer"}},[n("div",{staticClass:"send-area"}),n("div",{staticClass:"send-area"}),n("div",{staticClass:"send-area"}),n("div",{staticClass:"send-area"}),n("div",{staticClass:"send-area"}),n("div",{staticClass:"send-area"}),n("div",{staticClass:"send-area"}),n("div",{staticClass:"send-area"}),n("div",{staticClass:"send-area"}),n("div",{staticClass:"send-area"})])}],a=(n("55dd"),n("ac6a"),n("7514"),n("7f7f"),n("96cf"),n("3040")),s=(n("c5f6"),n("cadf"),n("551c"),n("097d"),n("a5bc")),o=n("2ef0"),l=n.n(o),c=n("f633"),u=n("c8b5"),d=n.n(u),h=n("1157"),f=n.n(h),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{"enter-active-class":"animated fadeIn faster","enter-leave-class":"animated fadeOut faster"}},[t.isShow?n("div",{staticClass:"overlay"},[n("div",{staticClass:"img-detail-box"},[n("div",{staticClass:"img-detail-container",style:t.style},[n("div",{staticClass:"img-detail-wrapper"},[n("div",{staticClass:"left-col"},[n("div",{staticClass:"item"},[n("div",{staticClass:"media-photo"},[n("img",{staticClass:"img",attrs:{src:t.content.img_url}}),t.attachedPins.length>0?n("ul",{staticClass:"pin-list"},t._l(t.attachedPins,function(t,e){return n("li",{key:e,attrs:{"data-color":t}})})):t._e(),n("button",{ref:"pinButton",staticClass:"btn-pin"})])])]),n("div",{staticClass:"right-col"},[n("h3",{staticClass:"detail-title"},[t._v(t._s(t.content.title))]),n("p",{staticClass:"detail-desc"},[t._v(t._s(t.content.desc))])])]),n("div",{staticClass:"btn return"},[n("a",{on:{click:t.onClose}},[n("img",{ref:"returnButton",attrs:{src:"/next100/static/img/btn_return01.svg",alt:"RETURN"}})]),n("a",{on:{click:t.onClickDelete}},[n("img",{ref:"returnButton",attrs:{src:"/next100/static/img/btn_return01.svg",alt:"RETURN"}})])])])])]):t._e()])},m=[],v={name:"ImageDetailModal",props:{isShow:{type:Boolean,required:!0},onClose:{type:Function,required:!0},content:{type:Object,required:!1},floorId:{type:Number,required:!0}},computed:{style:function(){return this.getModalStyleByFloorId(this.floorId)},attachedPins:function(){var t=this,e=[],n=this.content.id;return this.$store.state.loginUsers.forEach(function(i){var r=!!i.pinnedContents.find(function(t){return t.id===n});if(r){var a=t.getColorMap()[i.floorId];e.push(a)}}),e}},watch:{isShow:{handler:function(t,e){!1===e&&!0===t?this.startListenCustomTouchStart():!0===e&&!1===t&&this.stopListenCustomTouchStart()},deep:!0}},methods:{onClickDelete:function(){confirm("この画像を削除します");var t={data:{related_content_id:this.content.id}};s["a"].delete("/next100/contents",t),this.onClose()},onClickCloseArea:function(){this.onClose()},startListenCustomTouchStart:function(){window.addEventListener("CUSTOM_TOUCH_START",this.onTouchArea)},stopListenCustomTouchStart:function(){window.removeEventListener("CUSTOM_TOUCH_START",this.onTouchArea)},onTouchArea:function(t){var e=t.detail[0];this.isTouchObjectByElement(e,this.$refs.pinButton)?this.onTouchPinButton(e):this.onClickCloseArea(e)},onTouchPinButton:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.togglePinByFloorId(e.floorId,this.content);case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),onTouchCloseArea:function(t){alert("close area touch by "+t.floorId)},getModalStyleByFloorId:function(t){var e=this.getTransformDegByFloorId(t);return{transform:"rotate(".concat(e,"deg)")}},getTransformDegByFloorId:function(t){var e={1:0,2:90,3:180,4:270};return e[t]}},created:function(){document.body.addEventListener("CUSTOM_TOUCH_START",function(t){})}},C=v,p=(n("f6e5"),n("2877")),y=Object(p["a"])(C,g,m,!1,null,"3e043708",null);y.options.__file="ImageDetailModal.vue";var _=y.exports,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLeaveConfirm?n("div",{staticClass:"context-menu leave-table context-menu-wrapper",style:t.status.style},[n("p",{staticClass:"state-text sub"},[t._v("ARE YOU SURE?")]),n("div",{staticClass:"btn leave"},[n("a",{on:{click:t.onClickLeave}},[n("img",{attrs:{src:"/next100/static/img/btn_leave-table01.svg",alt:"LEAVE TABLE"}})])]),n("div",{staticClass:"btn return"},[n("a",{on:{click:function(e){t.isLeaveConfirm=!1}}},[n("img",{attrs:{src:"/next100/static/img/btn_return01.svg",alt:"RETURN"}})])])]):n("div",{staticClass:"context-menu context-menu-wrapper",style:t.status.style},[n("div",{staticClass:"btn-close"},[n("a",{on:{click:t.onClickCloseButton}},[n("img",{attrs:{src:"/next100/static/img/btn_close01.svg",alt:"×"}})])]),n("div",{staticClass:"qr-link-box"},[n("figure",{staticClass:"qr-img"},[n("qrcode-vue",{attrs:{value:t.qrCodeUrl,size:120,level:"H"}})],1),n("p",{staticClass:"qr-text"},[t._v("このトークのURL")])]),n("ul",{staticClass:"menu-list"},[n("li",{staticClass:"quit"},[n("a",{on:{click:t.onClickExitMeeting}},[t._m(0),n("p",[t._v("終了する")])])]),n("li",{staticClass:"offreco"},[n("a",{on:{click:t.onClickToggleMic}},[t._m(1),n("p",[t._v("オフレコ")])])]),n("li",{staticClass:"pins"},[n("a",{on:{click:t.onClickPinList}},[t._m(2),n("p",[t._v("ピン一覧")])])]),n("li",{staticClass:"leave"},[n("a",{on:{click:function(e){t.isLeaveConfirm=!0}}},[t._m(3),n("p",[t._v("退席する")])])])])])},L=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",{staticClass:"menu-icon"},[n("img",{attrs:{src:"/next100/static/img/btn_icon_quit01.svg",alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",{staticClass:"menu-icon"},[n("img",{attrs:{src:"/next100/static/img/btn_icon_offreco01.svg",alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",{staticClass:"menu-icon"},[n("img",{attrs:{src:"/next100/static/img/btn_icon_pins01.svg",alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",{staticClass:"menu-icon"},[n("img",{attrs:{src:"/next100/static/img/btn_icon_leave01.svg",alt:""}})])}],M={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8};function T(t){this.mode=M.MODE_8BIT_BYTE,this.data=t}T.prototype={getLength:function(t){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}};var x=T,E={L:1,M:0,Q:3,H:2};function I(t,e){this.totalCount=t,this.dataCount=e}I.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],I.getRSBlocks=function(t,e){var n=I.getRsBlockTable(t,e);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var i=n.length/3,r=new Array,a=0;a<i;a++)for(var s=n[3*a+0],o=n[3*a+1],l=n[3*a+2],c=0;c<s;c++)r.push(new I(o,l));return r},I.getRsBlockTable=function(t,e){switch(e){case E.L:return I.RS_BLOCK_TABLE[4*(t-1)+0];case E.M:return I.RS_BLOCK_TABLE[4*(t-1)+1];case E.Q:return I.RS_BLOCK_TABLE[4*(t-1)+2];case E.H:return I.RS_BLOCK_TABLE[4*(t-1)+3];default:return}};var b=I;function S(){this.buffer=new Array,this.length=0}S.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};for(var k=S,P={glog:function(t){if(t<1)throw new Error("glog("+t+")");return P.LOG_TABLE[t]},gexp:function(t){while(t<0)t+=255;while(t>=256)t-=255;return P.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},B=0;B<8;B++)P.EXP_TABLE[B]=1<<B;for(B=8;B<256;B++)P.EXP_TABLE[B]=P.EXP_TABLE[B-4]^P.EXP_TABLE[B-5]^P.EXP_TABLE[B-6]^P.EXP_TABLE[B-8];for(B=0;B<255;B++)P.LOG_TABLE[P.EXP_TABLE[B]]=B;var A=P;function D(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);var n=0;while(n<t.length&&0==t[n])n++;this.num=new Array(t.length-n+e);for(var i=0;i<t.length-n;i++)this.num[i]=t[i+n]}D.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<t.getLength();i++)e[n+i]^=A.gexp(A.glog(this.get(n))+A.glog(t.get(i)));return new D(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=A.glog(this.get(0))-A.glog(t.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(i=0;i<t.getLength();i++)n[i]^=A.gexp(A.glog(t.get(i))+e);return new D(n,0).mod(t)}};var R=D,N={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},O={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){var e=t<<10;while(O.getBCHDigit(e)-O.getBCHDigit(O.G15)>=0)e^=O.G15<<O.getBCHDigit(e)-O.getBCHDigit(O.G15);return(t<<10|e)^O.G15_MASK},getBCHTypeNumber:function(t){var e=t<<12;while(O.getBCHDigit(e)-O.getBCHDigit(O.G18)>=0)e^=O.G18<<O.getBCHDigit(e)-O.getBCHDigit(O.G18);return t<<12|e},getBCHDigit:function(t){var e=0;while(0!=t)e++,t>>>=1;return e},getPatternPosition:function(t){return O.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case N.PATTERN000:return(e+n)%2==0;case N.PATTERN001:return e%2==0;case N.PATTERN010:return n%3==0;case N.PATTERN011:return(e+n)%3==0;case N.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case N.PATTERN101:return e*n%2+e*n%3==0;case N.PATTERN110:return(e*n%2+e*n%3)%2==0;case N.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new R([1],0),n=0;n<t;n++)e=e.multiply(new R([1,A.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case M.MODE_NUMBER:return 10;case M.MODE_ALPHA_NUM:return 9;case M.MODE_8BIT_BYTE:return 8;case M.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case M.MODE_NUMBER:return 12;case M.MODE_ALPHA_NUM:return 11;case M.MODE_8BIT_BYTE:return 16;case M.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case M.MODE_NUMBER:return 14;case M.MODE_ALPHA_NUM:return 13;case M.MODE_8BIT_BYTE:return 16;case M.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,i=0;i<e;i++)for(var r=0;r<e;r++){for(var a=0,s=t.isDark(i,r),o=-1;o<=1;o++)if(!(i+o<0||e<=i+o))for(var l=-1;l<=1;l++)r+l<0||e<=r+l||0==o&&0==l||s==t.isDark(i+o,r+l)&&a++;a>5&&(n+=3+a-5)}for(i=0;i<e-1;i++)for(r=0;r<e-1;r++){var c=0;t.isDark(i,r)&&c++,t.isDark(i+1,r)&&c++,t.isDark(i,r+1)&&c++,t.isDark(i+1,r+1)&&c++,0!=c&&4!=c||(n+=3)}for(i=0;i<e;i++)for(r=0;r<e-6;r++)t.isDark(i,r)&&!t.isDark(i,r+1)&&t.isDark(i,r+2)&&t.isDark(i,r+3)&&t.isDark(i,r+4)&&!t.isDark(i,r+5)&&t.isDark(i,r+6)&&(n+=40);for(r=0;r<e;r++)for(i=0;i<e-6;i++)t.isDark(i,r)&&!t.isDark(i+1,r)&&t.isDark(i+2,r)&&t.isDark(i+3,r)&&t.isDark(i+4,r)&&!t.isDark(i+5,r)&&t.isDark(i+6,r)&&(n+=40);var u=0;for(r=0;r<e;r++)for(i=0;i<e;i++)t.isDark(i,r)&&u++;var d=Math.abs(100*u/e/e-50)/5;return n+=10*d,n}},U=O;function q(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var $=q.prototype;$.addData=function(t){var e=new x(t);this.dataList.push(e),this.dataCache=null},$.isDark=function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},$.getModuleCount=function(){return this.moduleCount},$.make=function(){if(this.typeNumber<1){var t=1;for(t=1;t<40;t++){for(var e=b.getRSBlocks(t,this.errorCorrectLevel),n=new k,i=0,r=0;r<e.length;r++)i+=e[r].dataCount;for(r=0;r<this.dataList.length;r++){var a=this.dataList[r];n.put(a.mode,4),n.put(a.getLength(),U.getLengthInBits(a.mode,t)),a.write(n)}if(n.getLengthInBits()<=8*i)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())},$.makeImpl=function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[n][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=q.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},$.setupPositionProbePattern=function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var i=-1;i<=7;i++)e+i<=-1||this.moduleCount<=e+i||(this.modules[t+n][e+i]=0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4)},$.getBestMaskPattern=function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var i=U.getLostPoint(this);(0==n||t>i)&&(t=i,e=n)}return e},$.createMovieClip=function(t,e,n){var i=t.createEmptyMovieClip(e,n),r=1;this.make();for(var a=0;a<this.modules.length;a++)for(var s=a*r,o=0;o<this.modules[a].length;o++){var l=o*r,c=this.modules[a][o];c&&(i.beginFill(0,100),i.moveTo(l,s),i.lineTo(l+r,s),i.lineTo(l+r,s+r),i.lineTo(l,s+r),i.endFill())}return i},$.setupTimingPattern=function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},$.setupPositionAdjustPattern=function(){for(var t=U.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var i=t[e],r=t[n];if(null==this.modules[i][r])for(var a=-2;a<=2;a++)for(var s=-2;s<=2;s++)this.modules[i+a][r+s]=-2==a||2==a||-2==s||2==s||0==a&&0==s}},$.setupTypeNumber=function(t){for(var e=U.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var i=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(n=0;n<18;n++){i=!t&&1==(e>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}},$.setupTypeInfo=function(t,e){for(var n=this.errorCorrectLevel<<3|e,i=U.getBCHTypeInfo(n),r=0;r<15;r++){var a=!t&&1==(i>>r&1);r<6?this.modules[r][8]=a:r<8?this.modules[r+1][8]=a:this.modules[this.moduleCount-15+r][8]=a}for(r=0;r<15;r++){a=!t&&1==(i>>r&1);r<8?this.modules[8][this.moduleCount-r-1]=a:r<9?this.modules[8][15-r-1+1]=a:this.modules[8][15-r-1]=a}this.modules[this.moduleCount-8][8]=!t},$.mapData=function(t,e){for(var n=-1,i=this.moduleCount-1,r=7,a=0,s=this.moduleCount-1;s>0;s-=2){6==s&&s--;while(1){for(var o=0;o<2;o++)if(null==this.modules[i][s-o]){var l=!1;a<t.length&&(l=1==(t[a]>>>r&1));var c=U.getMask(e,i,s-o);c&&(l=!l),this.modules[i][s-o]=l,r--,-1==r&&(a++,r=7)}if(i+=n,i<0||this.moduleCount<=i){i-=n,n=-n;break}}}},q.PAD0=236,q.PAD1=17,q.createData=function(t,e,n){for(var i=b.getRSBlocks(t,e),r=new k,a=0;a<n.length;a++){var s=n[a];r.put(s.mode,4),r.put(s.getLength(),U.getLengthInBits(s.mode,t)),s.write(r)}var o=0;for(a=0;a<i.length;a++)o+=i[a].dataCount;if(r.getLengthInBits()>8*o)throw new Error("code length overflow. ("+r.getLengthInBits()+">"+8*o+")");r.getLengthInBits()+4<=8*o&&r.put(0,4);while(r.getLengthInBits()%8!=0)r.putBit(!1);while(1){if(r.getLengthInBits()>=8*o)break;if(r.put(q.PAD0,8),r.getLengthInBits()>=8*o)break;r.put(q.PAD1,8)}return q.createBytes(r,i)},q.createBytes=function(t,e){for(var n=0,i=0,r=0,a=new Array(e.length),s=new Array(e.length),o=0;o<e.length;o++){var l=e[o].dataCount,c=e[o].totalCount-l;i=Math.max(i,l),r=Math.max(r,c),a[o]=new Array(l);for(var u=0;u<a[o].length;u++)a[o][u]=255&t.buffer[u+n];n+=l;var d=U.getErrorCorrectPolynomial(c),h=new R(a[o],d.getLength()-1),f=h.mod(d);s[o]=new Array(d.getLength()-1);for(u=0;u<s[o].length;u++){var g=u+f.getLength()-s[o].length;s[o][u]=g>=0?f.get(g):0}}var m=0;for(u=0;u<e.length;u++)m+=e[u].totalCount;var v=new Array(m),C=0;for(u=0;u<i;u++)for(o=0;o<e.length;o++)u<a[o].length&&(v[C++]=a[o][u]);for(u=0;u<r;u++)for(o=0;o<e.length;o++)u<s[o].length&&(v[C++]=s[o][u]);return v};var H=q;function F(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1}function j(t){for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):i<2048?(e+=String.fromCharCode(192|i>>6),e+=String.fromCharCode(128|63&i)):i<55296||i>=57344?(e+=String.fromCharCode(224|i>>12),e+=String.fromCharCode(128|i>>6&63),e+=String.fromCharCode(128|63&i)):(n++,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),e+=String.fromCharCode(240|i>>18),e+=String.fromCharCode(128|i>>12&63),e+=String.fromCharCode(128|i>>6&63),e+=String.fromCharCode(128|63&i))}return e}var K={render:function(t){var e=this.className,n=this.value,i=this.level,r=this.background,a=this.foreground,s=this.size;return t("div",{class:e,attrs:{value:n,level:i,background:r,foreground:a}},[t("canvas",{attrs:{height:s,width:s},style:{width:s+"px",height:s+"px"},ref:"qrcode-vue"},[])])},props:{value:{type:String,required:!0,default:""},className:{type:String,default:""},size:{type:[Number,String],default:100,validator:function(t){return!0!==isNaN(Number(t))}},level:{type:String,default:"L",validator:function(t){return["L","Q","M","H"].indexOf(t)>-1}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"}},methods:{render:function(){var t=this.value,e=this.size,n=this.level,i=this.background,r=this.foreground,a=e>>>0,s=new H(-1,E[n]);s.addData(j(t)),s.make();var o=this.$refs["qrcode-vue"],l=o.getContext("2d"),c=s.modules,u=a/c.length,d=a/c.length,h=(window.devicePixelRatio||1)/F(l);o.height=o.width=a*h,l.scale(h,h),c.forEach(function(t,e){t.forEach(function(t,n){l.fillStyle=t?r:i;var a=Math.ceil((n+1)*u)-Math.floor(n*u),s=Math.ceil((e+1)*d)-Math.floor(e*d);l.fillRect(Math.round(n*u),Math.round(e*d),a,s)})})}},updated:function(){this.render()},mounted:function(){this.render()}},G=K,z={methods:{$_wallMixin_getWallLogUrl:function(){var t=location.origin+"/next100/walls/".concat(this.$route.query.key,"/logs");return t}}},X={name:"ContextMenu",components:{QrcodeVue:G},mixins:[z],props:{status:{type:Object,required:!0},onClickPinList:{type:Function,required:!0},onClickExitMeeting:{type:Function,required:!0},onClickCloseButton:{type:Function,required:!0}},data:function(){return{isLeaveConfirm:!1,qrCodeUrl:this.$_wallMixin_getWallLogUrl()}},methods:{onClickToggleMic:function(){var t=window.isActive;t?(alert("会話ログの収集を止めます"),killMic()):(alert("会話ログの収集を再開します"),activateMic())},getTransformDegByFloorId:function(t){var e={1:0,2:90,3:180,4:270};return e[t]},onClickLeave:function(){var t=this.status.floorId;this.isLeaveConfirm=!1,this.onClickCloseButton(),this.logout(t)}}},Q=X,Y=(n("b677"),Object(p["a"])(Q,w,L,!1,null,"6d8f0ea4",null));Y.options.__file="ContextMenu.vue";var J=Y.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"overlay"},[t._l(t.loginUsers,function(e,i){return n("div",{key:i,class:"user-"+t.getDirectionMap()[e.floorId]+" user-box",attrs:{"data-color":t.getColorMap()[e.floorId]}},[n("div",{staticClass:"pin-img-list-container"},[n("div",{staticClass:"pin-img-list-wrapper"},[n("div",{staticClass:"pin-img-list-slide"},[n("ul",{staticClass:"pin-img-list"},t._l(e.pinnedContents,function(e,i){return n("li",{key:i,staticClass:"item"},[n("div",{staticClass:"media-photo",style:{backgroundImage:"url("+e.img_url+")"}},[n("img",{staticClass:"img",attrs:{src:"https://tse1.mm.bing.net/th?id=OIP.YKjBVc2Xt1k57Z91kGx5nQHaKw&pid=Api"}}),t._m(0,!0)])])}))])])]),n("div",{staticClass:"qr-link-box"},[n("figure",{staticClass:"qr-img"},[n("qrcode-vue",{staticClass:"qrcode",attrs:{value:t.qrCodeUrl,size:120,level:"H"}})],1),n("p",{staticClass:"qr-text"},[t._v("このトークのURL")])])])}),n("div",{staticClass:"control-box"},[n("div",{staticClass:"btn circle"},[n("a",{on:{click:t.onClose}},[n("img",{attrs:{src:"/next100/static/img/btn_circle_return01.svg",alt:"RETURN"}})])]),t.isConfirmExit?n("div",{staticClass:"btn circle"},[n("a",{on:{click:t.onExit}},[n("img",{attrs:{src:"/next100/static/img/btn_circle_quit01.svg",alt:"QUIT"}})])]):t._e()])],2)},V=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"pin-list"},[n("li",{attrs:{"data-color":"green"}})])}],Z=n("c93e"),tt=n("2f62"),et={name:"PinList",components:{QrcodeVue:G},mixins:[z],props:{onClose:{type:Function,required:!0},isConfirmExit:{type:Boolean,required:!0}},data:function(){return{qrCodeUrl:this.$_wallMixin_getWallLogUrl()}},methods:{onExit:function(){location.href="/next100"},getDirectionMap:function(){var t={1:"bottom",2:"left",3:"top",4:"right"};return t}},computed:Object(Z["a"])({},Object(tt["b"])(["loginUsers"]))},nt=et,it=(n("2bf5"),Object(p["a"])(nt,W,V,!1,null,"2feef591",null));it.options.__file="PinList.vue";var rt=it.exports,at=void 0,st=100,ot={name:"Meeting",mixins:[c["a"]],components:{ImageDetailModal:_,ContextMenu:J,PinList:rt},props:{maxLayerNum:{type:Number,default:10}},created:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={wallId:this.$route.params.wallId},window.key?startRecognizeSpeachSDK(e):window.addEventListener("RECOGNIZER_CONFIG_FETCH_COMPLETE",function(){startRecognizeSpeachSDK(e)}),this.listenPersonalTouch(),this.initializePinchEvent(),this.fetchAllUsersPinStatus(),t.next=7,this.fetchTranscripts();case 7:return this.currentShowMediaLayerIndex=this.layers.length,this.$route.query.stopPolling||this.startListenTranscriptsUpdate(),t.next=11,this.$nextTick();case 11:this.calcSendPosition(),window.fetchTranscripts=this.fetchTranscripts,window.startListenTranscriptsUpdate=this.startListenTranscriptsUpdate,window.stopListenTranscriptsUpdate=this.stopListenTranscriptsUpdate,this.listenLayerIndexChange();case 16:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),data:function(){return{currentShowMediaLayerIndex:0,currentShowMediaPoiner:0,fetchTranscriptsInterval:null,isConfirmExit:!1,isRecording:!0,layers:[],isShowPinListModal:!1,isShowContentDetailModal:!1,currentContentDetailModalFloor:1,currentDetailModalContent:null,contextMenuStatuses:[],positionMap:[],cachedLayerStyles:[],lastRelatedContents:[],lastSearches:[]}},computed:{minLayerIndex:function(){return this.currentShowMediaLayerIndex-this.maxLayerNum},maxLayerIndex:function(){return this.currentShowMediaLayerIndex-1}},watch:{layers:function(t,e){t.length>e.length&&this.incrementCurrentShowMediaLayerIndex()}},methods:{fetchAllUsersPinStatus:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,n,i,r,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.query.key,n="/next100/wall/".concat(e,"/pinned"),t.next=4,s["a"].get(n);case 4:i=t.sent,r=i.data,a=this.$store.state.loginUsers.map(function(t){var e=r.filter(function(e){return e.pins.filter(function(e){return e.eventuser_id===t.name}).length>0});return t.pinnedContents=e,t}),this.$store.commit("setState",{loginUsers:a});case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),listenLayerIndexChange:function(){var t=this;window.addEventListener("keydown",function(e){"ArrowUp"===e.key?t.incrementCurrentShowMediaLayerIndex():"ArrowDown"===e.key&&t.decrementCurrentShowMediaLayerIndex()})},incrementCurrentShowMediaLayerIndex:function(){this.currentShowMediaLayerIndex+1>=this.layers.length?this.currentShowMediaLayerIndex=this.layers.length:this.currentShowMediaLayerIndex+=1,this.currentShowMediaPointer+1>=this.layers.length?this.currentShowMediaPoiner=this.layers.length:this.currentShowMediaPoiner+=1},decrementCurrentShowMediaLayerIndex:function(){this.currentShowMediaLayerIndex-1<=0?this.currentShowMediaLayerIndex=0:this.currentShowMediaLayerIndex-=1,this.currentShowMediaPoiner-1<=0?this.currentShowMediaPoiner=0:this.currentShowMediaPoiner-=1},listenPersonalTouch:function(){window.addEventListener("CUSTOM_TOUCH_START",this.onClickTable)},fetchTranscripts:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,n,i,r,a,o,l;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params.wallId,n="/next100/contents?wall_id=".concat(e),t.next=4,s["a"].get(n);case 4:if(i=t.sent,r=i.data,a=r.searches,r.search_first_index,r.search_last_index,o=r.related_contents,r.related_content_last_index,l=o.length>this.lastRelatedContents.length,this.lastRelatedContents=o,this.lastSearches=a,l){t.next=11;break}return t.abrupt("return");case 11:this.updateLayers(a,o);case 12:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),updateLayers:function(t,e){var n=t.map(function(t){return t.related_contents=e.filter(function(e){return e.transcript_id===t.transcript_id}),t});if(n=n.filter(function(t){return t.related_contents&&t.related_contents.length>0}),this.layers[0]&&this.layers[0].id===n[0].id)return!1;this.layers=n.reverse()},onClickImage:function(t){var e=t.floorId,n=t.contentId;this.openContentDetailModal({floorId:e,contentId:n})},openContentDetailModal:function(t){var e=t.floorId,n=t.contentId;if(!this.isShowContentDetailModal){this.currentContentDetailModalFloor=e;var i=this.layers.find(function(t){return t.related_contents.find(function(t){return t.id===n})});if(!i)return!1;var r=i.related_contents.find(function(t){return t.id===n});this.currentDetailModalContent=r,this.isShowContentDetailModal=!0,this.contentDetailOpenTime=(new Date).getTime()}},closeContentDetailModal:function(){var t=1e3,e=(new Date).getTime()-this.contentDetailOpenTime;if(e<=t)return!1;this.isShowContentDetailModal=!1},onClickTable:function(t){var e=this,n=t.detail[0],i=!!this.$store.state.loginUsers.find(function(t){return t.floorId===n.floorId});if(!i)return this.login(n.floorId),!1;var r=!1,a=[];if(this.$refs.images&&this.$refs.images.forEach(function(t){if(e.isTouchObjectByElement(n,t))return r=!0,a.push(t),!1}),r){a.sort(function(t,e){var n=Number(t.getAttribute("data-content-id")),i=Number(e.getAttribute("data-content-id"));return n<i?-1:1});var s=a[0],o=n.floorId,l=Number(s.getAttribute("data-content-id"));return this.onClickImage({floorId:o,contentId:l}),!1}var c=this.$refs["context-menu-".concat(n.floorId)];c&&c.length>0&&!this.isTouchObjectByElement(n,c[0].$el)&&this.isExistContextMenuByFloorId(n.floorId)?this.closeContextMenu(n.floorId):this.openContextMenu(n)},isExistContextMenuByFloorId:function(t){return!!this.contextMenuStatuses.find(function(e){return e.floorId===t})},openContextMenu:function(t){var e=this.contextMenuStatuses.find(function(e){return e.floorId===t.floorId});if(e)return console.log("is exist context menu floor id: "+t.floorId),!1;var n=this.getTransformDegByFloorId(t.floorId),i={position:"absolute",left:"".concat(t.x,"px"),top:"".concat(t.y,"px"),transform:"rotate(".concat(n,"deg)")},r="context-menu-".concat(t.floorId),a={floorId:t.floorId,style:i,refName:r};this.contextMenuStatuses.push(a)},closeContextMenu:function(t){this.contextMenuStatuses=this.contextMenuStatuses.filter(function(e){return e.floorId!==t})},getStyleByContextMenuPosition:function(){},openPinList:function(){},createPin:function(){},removePin:function(){},offRecord:function(){},leave:function(){},exitWall:function(){},removeContent:function(){},removeWord:function(){},getTransformDegByFloorId:function(t){var e={1:0,2:90,3:180,4:270};return e[t]},initializePinchEvent:function(){var t=document.querySelector("#app"),e=new d.a(t);e.get("pinch").set({enable:!0}),e.on("pinchout",this.onPinchOut),e.on("pinchin",this.onPinchIn)},onPinchOut:l.a.debounce(function(t){at.decrementCurrentShowMediaLayerIndex()},st),onPinchIn:l.a.debounce(function(t){at.incrementCurrentShowMediaLayerIndex()},st),randNum:function(t,e){return Math.floor(Math.random()*(t-e+1)+e)},arreyShuffle:function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[n],t[n]=i}},calcSendPosition:function(){var t=[];f()("#media-send-leyer .send-area").each(function(e){var n=parseInt(f()(this).offset().left),i=parseInt(f()(this).offset().top),r=parseInt(n+f()(this).width()),a=parseInt(i+f()(this).height()),s={};s.x=n,s.y=i,s.x_max=r,s.y_max=a,t[e]=s}),this.arreyShuffle(t),this.positionMap=t},getLayerStyle:function(t){var e=["1deg","-0deg","-1deg","-2deg","-3deg","-4deg","-3deg","-2deg","-1deg","0deg"],n=.2,i=this.maxLayerIndex-t,r=Math.pow(n,i),a={transform:"scale(".concat(r,") rotate(").concat(e[t%e.length],")"),transition:"all .5s"};return a},getImageStyle:function(t,e){var n=this.cachedLayerStyles[t]&&this.cachedLayerStyles[t][e]||null;if(n)return n;var i=this.positionMap,r=e%i.length,a=["0deg","90deg","180deg","270deg"],s=l.a.random(i[r].y_max,i[r].y),o=l.a.random(i[r].x_max,i[r].x);this.arreyShuffle(a);var c={top:s+"px",left:o+"px",transform:"rotate("+a[e%a.length]+")"};return this.cachedLayerStyles[t]||(this.cachedLayerStyles[t]=[]),this.cachedLayerStyles[t][e]=c,c},getKeywordColor:function(t){var e=["red","blue","green","yellow","purple","vermilion","yellowgreen","orange","lightblue","gold","pink","bluegreen","white"],n=t%this.positionMap.length;return e[n]},updateLayer:function(){s["a"].get("")},startListenTranscriptsUpdate:function(){var t=this;this.fetchTranscriptsInterval=setInterval(function(){t.fetchTranscripts()},1e3)},stopListenTranscriptsUpdate:function(){clearInterval(this.fetchTranscriptsInterval),this.fetchTranscriptsInterval=null}}},lt=ot,ct=(n("c55d"),n("35df"),Object(p["a"])(lt,i,r,!1,null,"56f36640",null));ct.options.__file="Meeting.vue";e["default"]=ct.exports},eaf5:function(t,e,n){},f6e5:function(t,e,n){"use strict";var i=n("fce1"),r=n.n(i);r.a},fce1:function(t,e,n){}}]);
//# sourceMappingURL=chunk-5d8f46e6.1da263ba.js.map