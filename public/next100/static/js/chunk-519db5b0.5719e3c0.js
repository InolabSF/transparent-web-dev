(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-519db5b0"],{"1ca8":function(t,e,n){"use strict";var o=n("943a"),a=n.n(o);a.a},"943a":function(t,e,n){},d13f:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"layer-list-wrapper"},[n("div",{staticClass:"layer-list"},t._l(t.layers,function(e,o){return n("div",{staticClass:"layer",style:t.layerStyles[o]},[n("div",{staticClass:"layer__word",style:t.keywordStyles[o]},[t._v(t._s(e.words[0]))]),t._l(e.related_contents,function(a,r){return n("img",{key:a.id,ref:"images",refInFor:!0,staticClass:"layer__img",style:t.imageStyles[o],attrs:{"data-layer-id":e.id,"data-content-id":a.id,src:a.img_url},on:{click:function(e){t.onClickImage(a)}}})})],2)}))]),t._l(t.contextMenuStatuses,function(e){return[n("div",{ref:e.refName,refInFor:!0,staticClass:"context-menu",style:e.style},[t._v("\n      context menu\n    ")])]}),t.isShowContentDetailModal?[n("div",{staticClass:"modal is-active"},[n("div",{staticClass:"modal-background",on:{click:function(e){return e.preventDefault(),t.closeContentDetailModal(e)}}}),t.currentDetailModalContent?n("div",{staticClass:"modal-content",style:t.currentDetailModalStyle},[n("p",[t._v(t._s(t.currentDetailModalContent.title))]),n("p",{staticClass:"image is-4by3"},[n("img",{attrs:{src:t.currentDetailModalContent.img_url,alt:""}})]),n("p",[t._v(t._s(t.currentDetailModalContent.desc))])]):t._e(),n("button",{staticClass:"modal-close is-large",attrs:{"aria-label":"close"}})])]:t._e()],2)},a=[],r=(n("c5f6"),n("ac6a"),n("7514"),n("96cf"),n("3040")),i=(n("cadf"),n("551c"),n("097d"),n("a5bc")),c=n("2ef0"),s=n.n(c),l=50,u=10,d=10,f={name:"Meeting",created:function(){var t={wallId:this.$route.params.wallId};startRecognizeSpeachSDK(t),this.fetchTranscripts(),this.listenPersonalTouch()},data:function(){var t=this;return{layers:[],isShowContentDetailModal:!1,currentContentDetailModalFloor:!1,currentDetailModalContent:null,currentDetailModalStyle:{},contextMenuStatuses:[],layerStyles:s.a.range(10).map(function(e){return t.getComputedStyleForLayer(e)}),keywordStyles:s.a.range(10).map(function(){return t.getRandomStyleForKeyWord()}),imageStyles:s.a.range(10).map(function(){return t.getRandomStyleForImage()})}},computed:{},methods:{listenPersonalTouch:function(){window.addEventListener("CUSTOM_TOUCH_START",this.onClickTable)},isTouchObjectByElement:function(t,e){return t.x<=e.offsetLeft+e.offsetWidth&&t.x>=e.offsetLeft&&t.y<=e.offsetTop+e.offsetHeight&&t.y>=e.offsetTop},isTouchObjectByRect:function(t,e){var n=e.x,o=e.y,a=e.width,r=e.height;return t.x<=n+a&&t.x>=n&&t.y<=o+r&&t.y>=o},fetchTranscripts:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,n,o,a,r,c,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.params.wallId,n="/api/transcripts/".concat(e),t.next=4,i["a"].get(n);case 4:o=t.sent,a=o.data,r=a.searches,a.search_first_index,a.search_last_index,c=a.related_contents,a.related_content_last_index,s=r.map(function(t){return t.related_contents=c.filter(function(e){return e.transcript_id===t.transcript_id}),t}),this.layers=s;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),onClickImage:function(t){var e=t.floorId,n=t.contentId;this.openContentDetailModal({floorId:e,contentId:n})},openContentDetailModal:function(t){var e=t.floorId,n=t.contentId,o=this.layers.find(function(t){return t.related_contents.find(function(t){return t.id===n})});if(!o)return!1;var a=o.related_contents.find(function(t){return t.id===n});this.currentDetailModalStyle=this.getModalStyleByFloorId(e),this.currentDetailModalContent=a,this.isShowContentDetailModal=!0,this.contentDetailOpenTime=(new Date).getTime()},closeContentDetailModal:function(){var t=1e3,e=(new Date).getTime()-this.contentDetailOpenTime;if(e<=t)return!1;this.isShowContentDetailModal=!1},onClickTable:function(t){var e,n=this,o=t.detail[0];if(this.$refs.images.forEach(function(t){var a=t.getBoundingClientRect();if(n.isTouchObjectByRect(o,a))return!0,e=t,!1}),e){var a=o.floorId,r=Number(e.getAttribute("data-content-id"));return this.onClickImage({floorId:a,contentId:r}),!1}var i=this.$refs["context-menu-".concat(o.floorId)];i&&i.length>0&&!this.isTouchObjectByRect(o,i[0].getBoundingClientRect())?this.closeContextMenu(o):0===this.contextMenuStatuses.filter(function(t){return t.floorId===o.floorId}).length&&this.openContextMenu(o)},openContextMenu:function(t){var e={left:"".concat(t.x,"px"),top:"".concat(t.y,"px")},n="context-menu-".concat(t.floorId),o={floorId:t.floorId,style:e,refName:n};this.contextMenuStatuses.push(o)},closeContextMenu:function(t){var e=t.floorId;this.contextMenuStatuses=this.contextMenuStatuses.filter(function(t){return t.floorId!==e})},getStyleByContextMenuPosition:function(){},openPinList:function(){},createPin:function(){},removePin:function(){},offRecord:function(){},leave:function(){},exitWall:function(){},removeContent:function(){},removeWord:function(){},getRandomStyleForImage:function(){var t=s.a.random(window.innerWidth),e=s.a.random(window.innerHeight),n={left:"".concat(t,"px"),top:"".concat(e,"px")};return n},getRandomStyleForKeyWord:function(){var t=800,e=600,n=s.a.random(t,window.innerWidth-t),o=s.a.random(e,window.innerHeight-e),a={left:"".concat(n,"px"),top:"".concat(o,"px")};return a},getComputedStyleForLayer:function(t){var e=l-t*u,n=1-.08*t,o=d-t,a={transform:"translate3D(0px, 0px, ".concat(e,"px)"),opacity:n,zIndex:o};return a},getModalStyleByFloorId:function(t){var e={1:{transform:"rotate(0deg)"},2:{transform:"rotate(90deg)"},3:{transform:"rotate(180deg)"},4:{transform:"rotate(270deg)"}};return e[t]}}},h=f,m=(n("1ca8"),n("2877")),y=Object(m["a"])(h,o,a,!1,null,"45a7410c",null);y.options.__file="Meeting.vue";e["default"]=y.exports}}]);
//# sourceMappingURL=chunk-519db5b0.5719e3c0.js.map